<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" template="/WEB-INF/template.xhtml"
	xmlns:pe="http://primefaces.org/ui/extensions">
	<ui:define name="content">
		<style>
@media ( min-width : 500px) {
	.Wid50, .Wid50 input {
		width: auto !important;
	}
}

.extrato-financeiro td {
	padding-top: 5px;
	padding-bottom: 5px;
}

body .ui-selectoneradio td label {
	width: calc(100% - 44px) !important;
	margin-top: 10% !important;
}

.ui-autocomplete input {
	height: 100%;
}

body .ui-selectonemenu {
	margin: 0px !important;
	padding: 0px !important;
}

ui-selectonemenu-label {
	margin: 0px !important;
	padding: 0px !important;
}

body.layout-compact .ui-selectonemenu .ui-selectonemenu-label {
	margin-top: 2.5px !important;
	padding: 0px !important;
}

body.layout-compact .ui-selectonemenu .ui-selectonemenu-trigger .ui-icon
	{
	margin-top: -12px !important;
}
</style>

		<p:outputPanel id="viewFatura">
			<ui:include src="faturaViewPaciente.xhtml">
				<ui:param name="showNewLancamento" value="S" />
			</ui:include>
			<p:remoteCommand name="onCloseFaturaView" process="@this"
				update=":lume:tv:dtLancamentoValidar" />
		</p:outputPanel>

		<div class="ui-g ui-fluid">
			<div class="ui-g-12 ui-lg-12">
				<div class="card card-w-title">
					<p:tabView id="tv" styleClass="NoPadding">
						<p:ajax event="tabChange"
							listener="#{relatorioContabilMB.onTabChange}"
							update=":lume:tv:pnExtrato,:lume:tv:pnExtratoDetalhado"
							process="@this,:lume:tv:pnExtrato,:lume:tv:pnExtratoDetalhado" />
						<p:ajax event="tabChange"
							listener="#{relatorioContabilDetalhadoMB.onTabChange}"
							update=":lume:tv:pnExtratoDetalhado"
							process="@this,:lume:tv:pnExtratoDetalhado" />
						<p:ajax event="tabChange"
							listener="#{lancamentoContabilMB.onTabChange}"
							update=":lume:tv:lancamentosAValidar" process="@this" />

						<p:tab id="tab1" title="Pagamentos/Recebimentos">
							<div class="ui-g ui-fluid">
								<div class="ui-g-12 ui-lg-12">
									<h:inputHidden id="idLancamentoContabil"
										value="#{lancamentoContabilMB.entity.id}" />
									<p:outputPanel id="pnLancamentoContabil" styleClass="BordNone">
										<h1>Pagamentos/Recebimentos</h1>
										<div class="SeparatorFull"></div>
										<br />
										<p:panelGrid columns="2" layout="grid"
											styleClass="ui-panelgrid-blank form-group ui-fluid"
											columnClasses="ui-g-2,ui-g-10">
											<p:outputLabel for="forma" value="Forma : " />
											<p:selectOneRadio id="forma"
												value="#{lancamentoContabilMB.tipo}">
												<p:ajax process="@this"
													update=":lume:tv:pnLancamentoContabil"
													listener="#{lancamentoContabilMB.carrearListasPorTipoPagamento}" />
												<f:selectItem itemLabel="Pagamento" itemValue="Pagar" />
												<f:selectItem itemLabel="Recebimento" itemValue="Receber" />
											</p:selectOneRadio>

											<p:outputLabel for="dadosBasicos" value="Origem/Destino : " />
											<h:panelGroup id="pnBtorigem">
												<h:panelGroup styleClass="lumeField" style="display: flex">
													<p:autoComplete queryDelay="1000"
														value="#{lancamentoContabilMB.entity.dadosBasico}"
														id="dadosBasicos"
														completeMethod="#{lancamentoContabilMB.geraSugestoes}"
														var="d" itemLabel="#{d.tipoInformacaoNome}"
														itemValue="#{d}" converter="dadosBasico" required="true"
														size="46" minQueryLength="3" dropdown="true">
														<p:ajax event="itemSelect"
															listener="#{lancamentoContabilMB.handleSelect}"
															process=":lume:tv:dadosBasicos"
															update=":lume:tv:tipocategoria, :lume:tv:categoria, :lume:tv:motivo" />
													</p:autoComplete>
													<p:commandButton id="novoOrigem"
														rendered="#{!lancamentoContabilMB.visivel}"
														icon="fa fa-plus White"
														update="pnNovoOrigem, :lume:tv:pnBtorigem"
														immediate="true"
														actionListener="#{lancamentoContabilMB.novoOrigem}"
														style="margin-left: 5px;" />
													<p:commandButton id="cancelarNovoOrigem"
														rendered="#{lancamentoContabilMB.visivel}"
														icon="fa fa-minus White"
														update="pnNovoOrigem, :lume:tv:pnBtorigem"
														immediate="true"
														actionListener="#{lancamentoContabilMB.cancelarNovoOrigem}"
														style="margin-left: 5px;" />
												</h:panelGroup>
												<p:panel id="pnNovoOrigem"
													visible="#{lancamentoContabilMB.visivel}"
													styleClass="BordNone">
													<h:panelGroup styleClass="lumeField">
														<p:outputLabel for="nomeOrigem" value="Nome : " />
														<p:inputText id="nomeOrigem"
															value="#{lancamentoContabilMB.origem.dadosBasico.nome}"
															maxlength="200"
															required="#{lancamentoContabilMB.visivel}" />
													</h:panelGroup>
													<h:panelGroup styleClass="lumeField">
														<p:outputLabel for="tipoOrigem" value="Tipo de Pessoa: " />
														<p:selectOneRadio id="tipoOrigem"
															value="#{lancamentoContabilMB.tipoOrigem}" columns="2">
															<f:selectItem itemLabel="Juridica" itemValue="J" />
															<f:selectItem itemLabel="Física" itemValue="F" />
															<p:ajax update=":lume:tv:pgDocumento" />
														</p:selectOneRadio>
													</h:panelGroup>
													<h:panelGroup styleClass="lumeField" id="pgDocumento">
														<p:outputLabel value="Documento : " />
														<p:inputMask id="documentoCPF"
															value="#{lancamentoContabilMB.origem.dadosBasico.documento}"
															mask="999.999.999-99"
															rendered="#{lancamentoContabilMB.tipoOrigem == 'F'}"
															required="false" validator="cpfValidator" />
														<p:inputMask id="documentoCNPJ"
															value="#{lancamentoContabilMB.origem.dadosBasico.documento}"
															mask="99.999.999/9999-99"
															rendered="#{lancamentoContabilMB.tipoOrigem == 'J'}"
															required="false" validator="cnpjValidator" />
													</h:panelGroup>
													<br />
													<br />
													<div class="SeparatorFull"></div>
													<p:panelGrid columns="1" layout="grid"
														styleClass="ui-panelgrid-blank form-group ui-fluid">
														<p:commandButton id="persistOrigem"
															icon="White fa fa-save" styleClass="GreenButton"
															process="pgDocumento,nomeOrigem,@this" value="Salvar"
															update=":lume:tv:pnNovoOrigem, :lume:tv:dadosBasicos"
															actionListener="#{lancamentoContabilMB.actionPersistOrigem}" />
													</p:panelGrid>
												</p:panel>
											</h:panelGroup>

											<p:outputLabel for="tipocategoria" value="Tipo Categoria : " />
											<h:panelGroup styleClass="lumeField">
												<p:selectOneMenu id="tipocategoria"
													converter="tipocategoria" required="false"
													value="#{lancamentoContabilMB.tipoCategoria}" filter="true"
													filterMatchMode="contains">
													<p:ajax process="@this" update="categoria"
														listener="#{lancamentoContabilMB.carregarCategorias}" />
													<f:selectItem itemValue="#{null}"
														itemLabel="Selecione um Tipo Categoria" />
													<f:selectItems
														value="#{lancamentoContabilMB.tiposCategoria}" var="m"
														itemLabel="#{m.descricao}" itemValue="#{m}" />
												</p:selectOneMenu>
											</h:panelGroup>

											<p:outputLabel for="categoria" value="Categoria : " />
											<h:panelGroup styleClass="lumeField">
												<p:selectOneMenu id="categoria" converter="categoriamotivo"
													required="false" value="#{lancamentoContabilMB.categoria}"
													filter="true" filterMatchMode="contains">
													<p:ajax process="@this" update="motivo"
														listener="#{lancamentoContabilMB.carregarMotivos}" />
													<f:selectItem itemValue="#{null}"
														itemLabel="Selecione uma Categoria" />
													<f:selectItems value="#{lancamentoContabilMB.categorias}"
														var="m" itemLabel="#{m.descricao}" itemValue="#{m}" />
												</p:selectOneMenu>
											</h:panelGroup>

											<p:outputLabel for="motivo" value="Motivo : " />
											<h:panelGroup styleClass="lumeField">
												<p:selectOneMenu id="motivo" converter="motivo"
													required="true"
													value="#{lancamentoContabilMB.entity.motivo}" filter="true"
													filterMatchMode="contains">
													<p:ajax process="@this" update="tipocategoria,categoria"
														listener="#{lancamentoContabilMB.carregarTipoECategoria}" />
													<f:selectItem itemValue="#{null}"
														itemLabel="Selecione um Motivo" />
													<f:selectItems value="#{lancamentoContabilMB.motivos}"
														var="m" itemLabel="#{m.descricao}" itemValue="#{m}" />
												</p:selectOneMenu>
											</h:panelGroup>

											<p:outputLabel for="data" value="Data : " />
											<h:panelGroup styleClass="lumeField">
												<p:calendar id="data" required="true"
													value="#{lancamentoContabilMB.entity.data}"
													pattern="dd/MM/yyyy" mask="true" showWeeksBar="false"
													locale="#{lumeSecurity.locale}"
													timeZone="#{lumeSecurity.timeZone}" navigator="true"
													yearRange="-100:+10">
												</p:calendar>
											</h:panelGroup>

											<p:outputLabel for="valor" value="Valor : " />
											<h:panelGroup styleClass="lumeField">
												<p:inputNumber id="valor"
													value="#{lancamentoContabilMB.entity.valor}"
													required="true" maxlength="13" maxValue="9999999999.99"
													decimalSeparator="," symbol="R$ " thousandSeparator="." />
											</h:panelGroup>
										</p:panelGrid>
										<br />
										<div class="SeparatorFull"></div>
										<p:panelGrid columns="4" layout="grid"
											styleClass="ui-panelgrid-blank form-group ui-fluid">
											<p:commandButton id="new" icon="White fa fa-file-o"
												value="Novo Pagamento/Recebimento"
												actionListener="#{lancamentoContabilMB.actionNew}"
												update=":lume:tv:pnLancamentoContabil,:lume:tv:dtLancamentoContabil"
												immediate="true" />
											<p:commandButton id="persist" icon="White fa fa-save"
												value="Salvar"
												actionListener="#{lancamentoContabilMB.actionPersist}"
												update=":lume:tv:pnLancamentoContabil,:lume:tv:dtLancamentoContabil"
												process="@this,dadosBasicos,motivo,data,valor"
												oncomplete="PF('dtLancamentoContabil').filter()"
												styleClass="GreenButton" />
											<p:commandButton id="delete" icon="White fa fa-trash-o"
												value="Excluir"
												actionListener="#{lancamentoContabilMB.actionRemove}"
												update=":lume:tv:pnLancamentoContabil,:lume:tv:dtLancamentoContabil"
												process="@this"
												disabled="#{lancamentoContabilMB.entity.id == 0 or lancamentoContabilMB.entity.lancamento != null}"
												styleClass="RedButton" />
											<ui:remove>
												<p:commandButton value="Excel" ajax="false" immediate="true"
													icon="White fa fa-file-excel-o" styleClass="GreenButton">
													<p:dataExporter encoding="iso-8859-1" type="xls"
														target="dtLancamentoContabil"
														fileName="pagamentorecebimentos" />
												</p:commandButton>
											</ui:remove>

											<h:panelGroup>
												<p:splitButton icon="White fa fa fa-file-excel-o"
													value="Exportar tabela para Excel"
													styleClass="GreenSplitButton"
													actionListener="#{lancamentoContabilMB.exportarTabela('xls')}"
													ajax="false" process="dtLancamentoContabil,@this"
													update="@this" immediate="true"
													onclick="PrimeFaces.monitorDownload(function(){PF('loading').show();},function(){PF('loading').hide();});">

													<p:fileDownload
														value="#{lancamentoContabilMB.arquivoDownload}" />

													<p:menuitem value="Exportar tabela para PDF"
														icon="fa fa fa-file-pdf-o"
														actionListener="#{lancamentoContabilMB.exportarTabela('pdf')}"
														ajax="false" process="dtLancamentoContabil,@this"
														immediate="true"
														onclick="PrimeFaces.monitorDownload(function(){PF('loading').show();},function(){PF('loading').hide();});">
														<p:fileDownload
															value="#{lancamentoContabilMB.arquivoDownload}" />
													</p:menuitem>
													<p:menuitem value="Exportar tabela para CSV"
														icon="fa fa fa-file-pdf-o"
														actionListener="#{lancamentoMB.exportarTabela('csv')}"
														ajax="false" process="dtLancamentoContabil,@this"
														immediate="true"
														onclick="PrimeFaces.monitorDownload(function(){PF('loading').show();},function(){PF('loading').hide();});">
														<p:fileDownload value="#{lancamentoMB.arquivoDownload}" />
													</p:menuitem>
												</p:splitButton>
											</h:panelGroup>

										</p:panelGrid>
									</p:outputPanel>
									<div class="EmptyBox20"></div>


									<p:panelGrid columns="4"
										columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
										layout="grid" styleClass="ui-panelgrid-blank"
										style="border:0px none; background-color:transparent;"
										id="filtroPrincipalDatas">

										<p:outputLabel for="inicioLancamento" value="Inicio : " />
										<p:calendar id="inicioLancamento"
											value="#{lancamentoContabilMB.inicio}" pattern="dd/MM/yyyy"
											mask="true" required="false" />

										<p:outputLabel for="fimLancamento" value="Fim : " />
										<p:calendar id="fimLancamento"
											value="#{lancamentoContabilMB.fim}" pattern="dd/MM/yyyy"
											mask="true" required="false" />

									</p:panelGrid>

									<div class="SeparatorFull"></div>
									<p:panelGrid columns="4" layout="grid"
										styleClass="ui-panelgrid-blank form-group ui-fluid">
										<p:commandButton id="pesquisarLancamentos"
											icon="fa fa-search White" value="Pesquisar"
											actionListener="#{lancamentoContabilMB.geraLista}"
											update="filtroPrincipalDatas,dtLancamentoContabil"
											process="@this,filtroPrincipalDatas"
											oncomplete="PF('dtLancamentoContabil').filter()"
											styleClass="OrangeButton" />
									</p:panelGrid>


									<div class="EmptyBox20"></div>
									<p:dataTable filterDelay="1500" reflow="true" emptyMessage=""
										id="dtLancamentoContabil" widgetVar="dtLancamentoContabil"
										value="#{lancamentoContabilMB.lancamentoContabeis}" var="lc"
										rows="15" paginator="true"
										selection="#{lancamentoContabilMB.entity}"
										selectionMode="single" rowKey="#{lc}"
										paginatorPosition="bottom"
										binding="#{lancamentoContabilMB.tabelaLancamento}">
										<p:ajax event="rowSelect"
											update=":lume:tv:pnLancamentoContabil"
											listener="#{lancamentoContabilMB.carregaTela}" />
										<f:facet name="header">Contas a Pagar/Receber</f:facet>

										<p:tooltip for="@parent" rendered="#{lc.validado == 'S'}"
											value="Conferido às #{lc.dataValidacaoStr} pelo profissional #{lc.validadoPorProfissional.dadosBasico.prefixoNome}" />
										<p:column width="80" headerText="Ações">
											<p:commandButton icon="fa fa-check" styleClass="GreenButton"
												title="Validar Lançamento" process="@this"
												update="dtLancamentoContabil"
												actionListener="#{lancamentoContabilMB.validarLC(lc)}"
												disabled="#{lc.validado == 'S'}"
												rendered="#{lc.lancamento == null}" />
										</p:column>

										<p:column filterBy="#{lc.dadosBasico.nome}"
											sortBy="#{lc.dadosBasico.nome}" filterMatchMode="contains"
											headerText="Origem/Destino"
											filterFunction="#{lancamentoContabilMB.filtroSemAcento}">
											<h:outputText value="#{lc.dadosBasico.nome}" title="#{lc.id}" />
										</p:column>
										<p:column
											filterBy="#{lc.motivo.categoria.tipoCategoria.descricao}"
											sortBy="#{lc.motivo.categoria.tipoCategoria.descricao}"
											filterMatchMode="contains" headerText="Tipo Categoria"
											filterFunction="#{lancamentoContabilMB.filtroSemAcento}">
											<h:outputText
												value="#{lc.motivo.categoria.tipoCategoria.descricao}" />
										</p:column>
										<p:column filterBy="#{lc.motivo.categoria.descricao}"
											sortBy="#{lc.motivo.categoria.descricao}"
											filterMatchMode="contains" headerText="Categoria"
											filterFunction="#{lancamentoContabilMB.filtroSemAcento}">
											<h:outputText value="#{lc.motivo.categoria.descricao}" />
										</p:column>
										<p:column filterBy="#{lc.motivo.descricao}"
											sortBy="#{lc.motivo.descricao}" filterMatchMode="contains"
											headerText="Motivo"
											filterFunction="#{lancamentoContabilMB.filtroSemAcento}">
											<h:outputText value="#{lc.motivo.descricao}" />
										</p:column>
										<p:column
											filterBy="#{lancamentoContabilMB.valorLancamento(lc)}"
											sortBy="#{lancamentoContabilMB.valorLancamento(lc)}"
											style="text-align:right" filterMatchMode="contains"
											headerText="Valor(R$)">
											<h:outputText
												value="#{lancamentoContabilMB.valorLancamento(lc)}">
											</h:outputText>
										</p:column>
										<p:column headerText="Data" filterBy="#{lc.dataStr}"
											sortBy="#{lc.data}" filterMatchMode="contains"
											filterFunction="#{lancamentoContabilMB.filtroSemAcento}">
											<h:outputText value="#{lc.dataStr}" />
										</p:column>
										<p:column filterBy="#{lc.tipo}" sortBy="#{lc.tipo}"
											filterMatchMode="contains" headerText="Tipo"
											filterFunction="#{lancamentoContabilMB.filtroSemAcento}">
											<h:outputText value="#{lc.tipo}" />
										</p:column>
									</p:dataTable>
								</div>
							</div>
						</p:tab>

						<p:tab id="tab2" title="Conferência de Recebimentos">
							<div class="ui-g ui-fluid">
								<div class="ui-g-12 ui-lg-12">

									<p:outputPanel styleClass="BordNone">
										<h1>
											Conferência de Recebimentos
											<h:outputLabel class="fa fa-question" id="tooltipTitulo"
												style="font-size:24px; margin-left:10px;" />
											<p:tooltip for="tooltipTitulo"
												value="Nessa tela você pode validar os lançamentos de recebimento, conferindo os mesmos 
												e também consultar os lançamentos conforme os filtros."
												position="bottom" style="width:30%;" />
										</h1>
										<div class="SeparatorFull"></div>
									</p:outputPanel>
									<br />

									<p:panelGrid columns="3" layout="grid" id="lancamentosAValidar"
										styleClass="ui-panelgrid-blank ui-fluid form-group">

										<h:panelGroup>
											<p:outputLabel for="listaPeriodo" value="Período de crédito:" />
											<p:selectOneMenu id="listaPeriodo"
												value="#{conferenciaRecebimentoMB.periodoCredito}"
												update="dataConferenciaInicial,dataConferenciaFinal">

												<p:ajax process="@this"
													update="dataConferenciaInicial,dataConferenciaFinal"
													listener="#{conferenciaRecebimentoMB.actionTrocaDatasConferencia}" />

												<f:selectItem itemValue="1" itemLabel="Hoje" />
												<f:selectItem itemValue="2" itemLabel="Últimos 7 dias" />
												<f:selectItem itemValue="3" itemLabel="Últimos 15 dias" />
												<f:selectItem itemValue="4" itemLabel="Últimos 20 dias" />
												<f:selectItem itemValue="5" itemLabel="Últimos 30 dias" />
												<f:selectItem itemValue="6" itemLabel="Últimos 45 dias" />
												<f:selectItem itemValue="7" itemLabel="Mês anterior" />
												<f:selectItem itemValue="8" itemLabel="Últimos 6 meses" />
											</p:selectOneMenu>
										</h:panelGroup>

										<h:panelGroup id="dataConferenciaInicio">
											<p:outputLabel for="dataConferenciaInicial"
												value="Data de crédito de:" />
											<p:calendar id="dataConferenciaInicial"
												value="#{conferenciaRecebimentoMB.dataCreditoInicial}"
												autocomplete="false" locale="#{lumeSecurity.locale}"
												mask="true">
												<p:ajax event="dateSelect" process="@this" />
											</p:calendar>
										</h:panelGroup>

										<h:panelGroup id="dataConferenciaFim">
											<p:outputLabel for="dataConferenciaFinal"
												value="Data de crédito até:" />
											<p:calendar id="dataConferenciaFinal"
												value="#{conferenciaRecebimentoMB.dataCreditoFinal}"
												autocomplete="false" locale="#{lumeSecurity.locale}"
												mask="true">
												<p:ajax event="dateSelect" process="@this" />
											</p:calendar>
										</h:panelGroup>

										<h:panelGroup>
											<p:outputLabel for="status" value="Status:" />
											<p:selectOneMenu id="status"
												value="#{conferenciaRecebimentoMB.statusCredito}">

												<p:ajax process="@this" />

												<f:selectItem itemValue="T" itemLabel="Todos" />
												<f:selectItem itemValue="N"
													itemLabel="Somente não validados" />
												<f:selectItem itemValue="S"
													itemLabel="Somente validados com sucesso" />
												<f:selectItem itemValue="E"
													itemLabel="Somente validados com erro" />
											</p:selectOneMenu>
										</h:panelGroup>

										<h:panelGroup>
											<h:outputText for="filtroPaciente" value="Paciente:" />
											<p:autoComplete id="filtroPaciente"
												value="#{conferenciaRecebimentoMB.filtroPorPaciente}"
												completeMethod="#{conferenciaRecebimentoMB.sugestoesPacientes}"
												var="p" itemLabel="#{p.dadosBasico.nome}" itemValue="#{p}"
												converter="paciente" forceSelection="true"
												scrollHeight="400" minQueryLength="3" queryDelay="1000">

												<p:column headerText="Código" style="text-align: center;">
													<h:outputText value="#{p.codigo}" />
												</p:column>
												<p:column headerText="Nome">
													<h:outputText value="#{p.dadosBasico.nome}" />
												</p:column>
												<p:column headerText="Celular">
													<h:outputText value="#{p.dadosBasico.celular}" />
												</p:column>
												<p:column headerText="Nome da Mãe">
													<h:outputText value="#{p.nomeMae}" />
												</p:column>

												<p:ajax event="itemSelect" process="@this" />
											</p:autoComplete>
										</h:panelGroup>

										<h:panelGroup>
											<p:outputLabel for="confereciaForma"
												value="Forma de pagamento:" />
											<p:selectOneMenu id="confereciaForma"
												value="#{conferenciaRecebimentoMB.formaPagamento}"
												converter="tarifa">

												<p:ajax process="@this" />

												<f:selectItem itemValue="#{null}" itemLabel="Todos" />
												<f:selectItems value="#{conferenciaRecebimentoMB.tarifas}"
													var="tarifa" itemLabel="#{tarifa.produto}"
													itemValue="#{tarifa}" />
											</p:selectOneMenu>
										</h:panelGroup>

									</p:panelGrid>

									<p:panelGrid columns="3" layout="grid"
										styleClass="ui-panelgrid-blank ui-fluid form-group">

										<h:panelGroup>
											<p:commandButton value="Pesquisar"
												action="#{conferenciaRecebimentoMB.carregarLancamentosConferencia}"
												icon="White fa fa-search" update="dtLancamentoValidar"
												process="@this,filtroPaciente" styleClass="NavyButton" />
										</h:panelGroup>

										<h:panelGroup>
											<p:splitButton icon="White fa fa fa-file-excel-o"
												value="Exportar tabela para Excel"
												styleClass="GreenSplitButton"
												actionListener="#{conferenciaRecebimentoMB.exportarTabelaConferencia('xls')}"
												ajax="false" process="dtLancamentoValidar,@this"
												update="@this" immediate="true"
												onclick="PrimeFaces.monitorDownload(function(){PF('loading').show();},function(){PF('loading').hide();});">

												<p:fileDownload
													value="#{conferenciaRecebimentoMB.arquivoDownload}" />

												<p:menuitem value="Exportar tabela para PDF"
													icon="fa fa fa-file-pdf-o"
													actionListener="#{conferenciaRecebimentoMB.exportarTabelaConferencia('pdf')}"
													ajax="false" process="dtLancamentoValidar,@this"
													immediate="true"
													onclick="PrimeFaces.monitorDownload(function(){PF('loading').show();},function(){PF('loading').hide();});">
													<p:fileDownload
														value="#{conferenciaRecebimentoMB.arquivoDownload}" />
												</p:menuitem>
												<p:menuitem value="Exportar tabela para CSV"
													icon="fa fa fa-file-pdf-o"
													actionListener="#{conferenciaRecebimentoMB.exportarTabelaConferencia('csv')}"
													ajax="false" process="dtLancamentoValidar,@this"
													immediate="true"
													onclick="PrimeFaces.monitorDownload(function(){PF('loading').show();},function(){PF('loading').hide();});">
													<p:fileDownload
														value="#{conferenciaRecebimentoMB.arquivoDownload}" />
												</p:menuitem>
											</p:splitButton>
										</h:panelGroup>

										<h:panelGroup>
											<p:commandButton
												value="Conferir todos os lançamentos selecionados"
												actionListener="#{conferenciaRecebimentoMB.validarLancamentosSelecionados}"
												update="dtLancamentoValidar"
												process="@this,dtLancamentoValidar" />
										</h:panelGroup>
									</p:panelGrid>

									<p:dataTable filterDelay="1500" reflow="true" emptyMessage=""
										id="dtLancamentoValidar"
										value="#{conferenciaRecebimentoMB.entityList}" var="lc"
										rows="15" paginator="true" paginatorPosition="bottom"
										widgetVar="dtLancamentoValidar" rowKey="#{lc}"
										selection="#{conferenciaRecebimentoMB.lancamentosSelecionadosConferencia}"
										binding="#{conferenciaRecebimentoMB.tabelaLancamentoConferencia}">

										<f:facet name="header">Lançamentos</f:facet>

										<p:column selectionMode="multiple"
											style="width:16px;text-align:center">
										</p:column>

										<p:column headerText="Ações" exportable="false">
											<p:commandButton icon="fa fa-eye" process="@this"
												actionListener="#{faturaPagtoMB.visualizaFatura(lc.fatura)}"
												update=":lume:pnlfaturaView, :lume:pnlfaturaViewHeader, :lume:buttonViewFatura"
												oncomplete="PF('dlgFaturaView').show();"
												styleClass="NavyButton" title="Visualizar Fatura" />
											<ui:remove>
												<p:commandButton icon="White fa fa-money"
													styleClass="RedButton" title="Ajustar valor"
													actionListener="#{conferenciaRecebimentoMB.setEntity(lc)}"
													process="@this" update=":lume:dlgAjustarValor"
													oncomplete="PF('dlgAjustarValor').show();" />
											</ui:remove>
										</p:column>
										<p:column filterBy="#{lc.fatura.paciente.dadosBasico.nomeStr}"
											sortBy="#{lc.fatura.paciente.dadosBasico.nome}"
											filterMatchMode="contains" headerText="Paciente">
											<h:outputText value="#{lc.fatura.paciente.dadosBasico.nome}"
												title="#{lc.id}" />
										</p:column>
										<p:column filterBy="#{lc.pt.descricao}"
											sortBy="#{lc.pt.descricao}" filterMatchMode="contains"
											headerText="PlanoTratamento">
											<h:outputText value="#{lc.pt.descricao}" title="#{lc.pt.id}" />
										</p:column>
										<p:column filterBy="#{lc.formaPagamentoStr}"
											sortBy="#{lc.formaPagamentoStr}" filterMatchMode="contains"
											headerText="Produto">
											<h:outputText value="#{lc.formaPagamentoStr}" />
										</p:column>
										<p:column headerText="Data Pagamento"
											filterBy="#{lc.dataPagamentoStr}"
											sortBy="#{lc.dataPagamento}" filterMatchMode="contains">
											<h:outputText value="#{lc.dataPagamentoStr}" />
										</p:column>
										<p:column headerText="Data Crédito"
											filterBy="#{lc.dataCreditoStr}" sortBy="#{lc.dataCredito}"
											filterMatchMode="contains">
											<h:outputText value="#{lc.dataCreditoStr}" />
										</p:column>
										<p:column headerText="Valor à conferir"
											filterBy="#{conferenciaRecebimentoMB.valorConferir(lc)}"
											sortBy="#{conferenciaRecebimentoMB.valorConferir(lc)}"
											filterMatchMode="contains">
											<h:outputText
												value="#{conferenciaRecebimentoMB.valorConferir(lc)}">
												<f:convertNumber currencySymbol="R$" type="currency"
													minFractionDigits="2" />
											</h:outputText>
											<f:facet name="footer">
												<h:outputText value="Total " />
												<h:outputText
													value="#{conferenciaRecebimentoMB.somatorioValorConferirConferencia}">
													<f:convertNumber currencySymbol="R$" type="currency"
														minFractionDigits="2" />
												</h:outputText>
											</f:facet>
										</p:column>
										<p:column headerText="Valor conferido"
											filterBy="#{conferenciaRecebimentoMB.valorConferido(lc)}"
											sortBy="#{conferenciaRecebimentoMB.valorConferido(lc)}"
											filterMatchMode="contains">
											<h:outputText
												value="#{conferenciaRecebimentoMB.valorConferido(lc)}">
												<f:convertNumber currencySymbol="R$" type="currency"
													minFractionDigits="2" />
											</h:outputText>
											<f:facet name="footer">
												<h:outputText value="Total " />
												<h:outputText
													value="#{conferenciaRecebimentoMB.somatorioValorConferidoConferencia}">
													<f:convertNumber currencySymbol="R$" type="currency"
														minFractionDigits="2" />
												</h:outputText>
											</f:facet>
										</p:column>
										<p:column headerText="Valor total"
											sortBy="#{conferenciaRecebimentoMB.valorTotal(lc)}"
											filterBy="#{conferenciaRecebimentoMB.valorTotal(lc)}"
											filterMatchMode="contains">
											<h:outputText
												value="#{conferenciaRecebimentoMB.valorTotal(lc)}">
												<f:convertNumber currencySymbol="R$" type="currency"
													minFractionDigits="2" />
											</h:outputText>
											<f:facet name="footer">
												<h:outputText value="Total " />
												<h:outputText
													value="#{conferenciaRecebimentoMB.somatorioValorTotalConferencia}">
													<f:convertNumber currencySymbol="R$" type="currency"
														minFractionDigits="2" />
												</h:outputText>
											</f:facet>
										</p:column>
										<p:column headerText="Status"
											sortBy="#{lc.statusCompleto}"
											filterBy="#{lc.statusCompleto}"
											filterMatchMode="contains">
											<h:outputText
												value="#{lc.statusCompleto}" />
										</p:column>
										<p:column headerText="Conferência" width="100"
											exportable="false">
											<p:commandButton icon="White fa fa-thumbs-o-up"
												actionListener="#{conferenciaRecebimentoMB.actionValidarLancamento(lc)}"
												update=":lume:tv:dtLancamentoValidar, :lume:tv:tab2"
												process="@this,:lume:tv:dtLancamentoValidar"
												styleClass="GreenButton"
												oncomplete="PF('dtLancamentoValidar').filter()"
												title="Valor recebido" />
											<p:commandButton icon="White fa fa-thumbs-o-down"
												actionListener="#{conferenciaRecebimentoMB.actionNaoValidarLancamento(lc)}"
												update=":lume:tv:dtLancamentoValidar, :lume:tv:tab2"
												process="@this,:lume:tv:dtLancamentoValidar"
												styleClass="RedButton"
												oncomplete="PF('dtLancamentoValidar').filter()"
												title="Falha no recebimento" />
										</p:column>
									</p:dataTable>

								</div>
							</div>
						</p:tab>
						<p:tab id="tab3" title="Extrato">
							<div class="ui-g ui-fluid">
								<div class="ui-g-12 ui-lg-12">
									<p:outputPanel id="pnExtrato" styleClass="BordNone">

										<p:outputPanel styleClass="BordNone">
											<h1>Extrato Financeiro</h1>
											<div class="SeparatorFull"></div>
										</p:outputPanel>

										<p:panelGrid columns="4"
											columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
											layout="grid" styleClass="ui-panelgrid-blank"
											style="border:0px none; background-color:transparent;">

											<p:outputLabel for="inicio" value="Inicio : " />
											<p:calendar id="inicio" value="#{relatorioContabilMB.inicio}"
												pattern="dd/MM/yyyy" mask="true" required="true" />

											<p:outputLabel for="fim" value="Fim : " />
											<p:calendar id="fim" value="#{relatorioContabilMB.fim}"
												pattern="dd/MM/yyyy" mask="true" required="true" />

										</p:panelGrid>

										<div class="SeparatorFull"></div>
										<p:panelGrid columns="4" layout="grid"
											styleClass="ui-panelgrid-blank form-group ui-fluid">
											<p:commandButton id="pesquisar" icon="fa fa-search White"
												value="Pesquisar"
												process="@this, :lume:tv:inicio, :lume:tv:fim"
												actionListener="#{relatorioContabilMB.filtra}"
												update=":lume:tv:extrato" styleClass="OrangeButton" />
											<p:commandButton id="limpar" icon="White fa fa-file-o"
												value="Limpar" update="inicio, fim" process="@this"
												actionListener="#{relatorioContabilMB.actionLimpar}" />
											<p:commandButton value="Imprimir" type="button"
												icon="White fa fa-print" styleClass="NavyButton">
												<p:printer target="extrato" />
											</p:commandButton>
										</p:panelGrid>
										<div class="SeparatorFull"></div>
										<br />
										<p:panel>
											<h:outputLabel id="extrato"
												value="#{relatorioContabilMB.extrato}" escape="false" />
										</p:panel>
									</p:outputPanel>
								</div>
							</div>
						</p:tab>
						<p:tab id="tab4" title="Extrato Detalhado">
							<div class="ui-g ui-fluid">
								<div class="ui-g-12 ui-lg-12">
									<p:outputPanel id="pnExtratoDetalhado" styleClass="BordNone">

										<p:outputPanel styleClass="BordNone">
											<h1>Extrato Financeiro Detalhado</h1>
											<div class="SeparatorFull"></div>
										</p:outputPanel>
										<p:panelGrid columns="4"
											columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
											layout="grid" styleClass="ui-panelgrid-blank"
											style="border:0px none; background-color:transparent;">

											<p:outputLabel for="inicioDetalhado" value="Inicio : " />
											<p:calendar id="inicioDetalhado"
												value="#{relatorioContabilDetalhadoMB.inicio}"
												pattern="dd/MM/yyyy" mask="true" required="true" />

											<p:outputLabel for="fimDetalhado" value="Fim : " />
											<p:calendar id="fimDetalhado"
												value="#{relatorioContabilDetalhadoMB.fim}"
												pattern="dd/MM/yyyy" mask="true" required="true" />

										</p:panelGrid>

										<div class="SeparatorFull"></div>
										<p:panelGrid columns="4" layout="grid"
											styleClass="ui-panelgrid-blank form-group ui-fluid">
											<p:commandButton id="pesquisarDetalhado"
												icon="fa fa-search White" value="Pesquisar"
												actionListener="#{relatorioContabilDetalhadoMB.filtra}"
												update="extratoDetalhado"
												process="@this,extratoDetalhado,inicioDetalhado,fimDetalhado"
												styleClass="NavyButton" />
											<p:commandButton id="limparDetalhado"
												icon="White fa fa-file-o" value="Limpar"
												update="inicioDetalhado, fimDetalhado" process="@this"
												actionListener="#{relatorioContabilDetalhadoMB.actionLimpar}" />
											<p:commandButton value="Imprimir" type="button"
												icon="White fa fa-print" styleClass="NavyButton">
												<p:printer target="extratoDetalhado" />
											</p:commandButton>
										</p:panelGrid>
										<div class="SeparatorFull"></div>
										<br />
										<p:panel>
											<h:outputLabel id="extratoDetalhado"
												value="#{relatorioContabilDetalhadoMB.extrato}"
												escape="false" />
										</p:panel>
									</p:outputPanel>
								</div>
							</div>
						</p:tab>
					</p:tabView>

					<p:dialog id="dlgAjustarValor" widgetVar="dlgAjustarValor"
						appendTo=":lume" header="Ajustar valor" height="150" width="400">

						<p:fieldset toggleable="false">
							<p:panelGrid columns="2" layout="grid"
								styleClass="ui-panelgrid-blank ui-fluid form-group">

								<p:outputLabel for="valorAjuste" value="Valor lançamento:" />
								<p:inputNumber id="valorAjuste" symbol="R$ "
									value="#{conferenciaRecebimentoMB.entity.valor}"
									decimalPlaces="2" />

								<h:panelGroup>
									<p:commandButton value="Salvar" styleClass="GreenButton"
										actionListener="#{conferenciaRecebimentoMB.salvarAjusteValor}"
										process="@this,valorAjuste" />
								</h:panelGroup>
								<h:panelGroup>
									<p:commandButton value="Fechar" styleClass="NavyButton"
										process="@this" oncomplete="PF('dlgAjustarValor').hide();" />
								</h:panelGroup>
							</p:panelGrid>
						</p:fieldset>

					</p:dialog>

				</div>
			</div>
		</div>


	</ui:define>
</ui:composition>