<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets">
	<div class="Container100 Responsive100 NoIndent">
		<div class="Container100 ui-fluid NoPadding">
			<div class="Card">
				<p:outputPanel id="pnEvolucao" styleClass="BordNone">
					<h1>Descrição</h1>
					
					<p:separator styleClass="SeparatorFull" />
					
					<p:inputTextarea id="eDescricao" cols="100" rows="6" disabled="#{evolucaoMB.entity.excluido == 'S'}" value="#{evolucaoMB.entity.descricao}"
						autoResize="true" required="true" maxlength="2000" counterTemplate="{0} caracteres restantes." counter="counter" />
					<p:message for="eDescricao" styleClass="msg" />
					<h:outputText id="counter" />
					
					<p:separator styleClass="SeparatorFull" />
					
					<p:panelGrid columns="3" layout="grid"
						styleClass="ui-panelgrid-blank form-group ui-fluid optionsPaciente">
						<p:commandButton id="persistEvolucao" icon="White fa fa-save White" value="Salvar" actionListener="#{evolucaoMB.actionPersist}"
							update=":lume:tabView:pnEvolucao,:lume:tabView:dtEvolucao" process=":lume:tabView:pnEvolucao" disabled="#{evolucaoMB.entity.excluido == 'S'}"
							 styleClass="GreenButton" />
						<p:commandButton id="deleteEvolucao" icon="White fa fa-trash-o White" value="Excluir" actionListener="#{evolucaoMB.actionRemove}"
							update=":lume:tabView:pnEvolucao,:lume:tabView:dtEvolucao" process=":lume:tabView:pnEvolucao" 
							disabled="#{evolucaoMB.entity.id==0 or evolucaoMB.entity.excluido == 'S'}" styleClass="RedButton" />
						<p:commandButton id="newEvolucao" icon="White fa fa-file-o White" value="Novo" actionListener="#{evolucaoMB.actionNew}"
							update=":lume:tabView:pnEvolucao" immediate="true" tabindex="4" process="@this"  />
					</p:panelGrid>
				</p:outputPanel>
				<div class="EmptyBox20"></div>

				<p:dataTable filterDelay="1500"  reflow="true" emptyMessage="" id="dtEvolucao" value="#{evolucaoMB.evolucoes}" var="evolucao" rows="15" paginator="true"
					paginatorPosition="bottom" selection="#{evolucaoMB.entity}" selectionMode="single" rowKey="#{evolucao}">
					<p:ajax event="rowSelect" update=":lume:tabView:pnEvolucao" />
					<f:facet name="header">Evolução</f:facet>
					<p:column filterBy="#{evolucao.descricao}" sortBy="#{evolucao.descricao}" filterMatchMode="contains" width="70%" headerText="Descrição">
						<h:outputText value="#{evolucao.excluido=='S'?'[ REMOVIDO ]':''} #{evolucao.descricao}" title="#{evolucao.id}"
							style="#{evolucao.excluido=='S'?'color:red':''}" />
					</p:column>
					<p:column filterBy="#{evolucao.profissional.dadosBasico.nome}" sortBy="#{evolucao.profissional.dadosBasico.nome}" filterMatchMode="contains"
						headerText="Profissional">
						<h:outputText value="#{evolucao.profissional.dadosBasico.nome}" />
					</p:column>
					<p:column filterBy="#{evolucao.dataStr}" sortBy="#{evolucao.dataStrOrd}" filterMatchMode="contains" headerText="Data">
						<h:outputText value="#{evolucao.dataStr}" />
					</p:column>
				</p:dataTable>
			</div>
		</div>
	</div>
</ui:composition>