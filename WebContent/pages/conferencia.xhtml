<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui" template="/WEB-INF/template.xhtml" xmlns:pe="http://primefaces.org/ui/extensions">
    <ui:define name="content">
        <div class="Container100 Responsive100 NoIndent">
            <div class="Container100 ui-fluid NoPadding">
                <div class="Card">

                    <p:panel id="pnConferencias" styleClass="BordNone">
                        <h1 class="CardBigTopic">Consulta Ajustes</h1>
                        <div class="SeparatorFull"></div>
                        <p:panelGrid columns="4" columnClasses="ui-grid-col-4,ui-grid-col-8" layout="grid" styleClass="ui-panelgrid-blank" style="border:0px none; background-color:transparent;">
                            <p:outputLabel for="conferencia" value="Conferência : " />
                            <p:selectOneMenu id="conferencia" value="#{conferenciaMB.entity}" style="width: 340px;" converter="conferencia">
                                <f:selectItem itemLabel="Selecione uma Conferência" value="#{null}" />
                                <f:selectItems value="#{conferenciaMB.conferencias}" var="c" itemValue="#{c}" itemLabel="#{c.dataStr}" />
                                <p:ajax update=":lume:pnConferencias" listener="#{conferenciaMB.pesquisa}" />
                            </p:selectOneMenu>
                        </p:panelGrid>
                        <div class="EmptyBox20"></div>
                        <p:dataTable filterDelay="1500"  reflow="true" emptyMessage="" id="dtConferencias" value="#{conferenciaMB.conferenciasMaterial}" var="conferencia" rows="7" paginator="true" rowKey="#{conferencia}"
                            paginatorPosition="bottom">
                            <f:facet name="header">Conferências</f:facet>
                            <p:column filterBy="#{conferencia.conferencia.profissional.dadosBasico.prefixoNome}" sortBy="#{conferencia.conferencia.profissional.dadosBasico.prefixoNome}"
                                filterMatchMode="contains" headerText="Conferente">
                                <h:outputText value="#{conferencia.conferencia.profissional.dadosBasico.prefixoNome}" title="#{conferencia.id}" />
                            </p:column>
                            <p:column filterBy="#{conferencia.material.item.descricaoLimpa}" sortBy="#{conferencia.material.item.descricao}" filterMatchMode="contains" headerText="Material">
                                <h:outputText value="#{conferencia.material.item.descricao}" />
                            </p:column>
                            <p:column filterBy="#{conferencia.material.local.descricao}" sortBy="#{conferencia.material.local.descricao}" filterMatchMode="contains">
                                <f:facet name="header">
                                    <h:outputText value="Local" />
                                </f:facet>
                                <h:outputText value="#{conferencia.material.local.descricao}" />
                            </p:column>
                            <p:column sortBy="#{conferencia.valorOriginal}" filterBy="#{conferencia.valorOriginal}" filterMatchMode="contains" headerText="Quantidade Original">
                                <h:outputText value="#{conferencia.valorOriginal}">
                                    <f:convertNumber />
                                </h:outputText>
                                <h:outputText value="#{conferencia.material.item.unidadeMedidaString}" styleClass="unidadeMedidaString" />
                            </p:column>
                            <p:column sortBy="#{conferencia.valorAlterado}" filterBy="#{conferencia.valorAlterado}" filterMatchMode="contains" headerText="Quantidade Alterada">
                                <h:outputText value="#{conferencia.valorAlterado}">
                                    <f:convertNumber />
                                </h:outputText>
                                <h:outputText value="#{conferencia.material.item.unidadeMedidaString}" styleClass="unidadeMedidaString" />
                            </p:column>

                            <p:column sortBy="#{conferencia.motivo}" filterMatchMode="contains" filterBy="#{conferencia.motivo}" headerText="Motivo">
                                <h:outputText value="#{conferencia.motivo}" />
                            </p:column>

                            <p:column sortBy="#{conferencia.dataCadastroStr}" filterMatchMode="contains" filterBy="#{conferencia.dataCadastroStr}" headerText="Data do Cadastro">
                                <h:outputText value="#{conferencia.dataCadastroStr}" />
                            </p:column>
                        </p:dataTable>
                        <div class="SeparatorFull"></div>

                        <div class="Container25 Responsive100">
                            <p:commandButton value="Excel" ajax="false" process="dtConferencias" icon="White fa fa-file-excel-o" styleClass="GreenButton">
                                <p:dataExporter encoding="iso-8859-1" type="xls" target="dtConferencias" fileName="Conferencia" />
                            </p:commandButton>
                        </div>
                    </p:panel>
                </div>
            </div>
        </div>
    </ui:define>
</ui:composition>