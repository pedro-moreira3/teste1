<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" template="/WEB-INF/template.xhtml"
	xmlns:pe="http://primefaces.org/ui/extensions">
	<ui:define name="content">

		<style>
.centerPanels .ui-panel .ui-panel-titlebar, .centerPanels .ui-panel .ui-panel-content
	{
	text-align: center;
}

.lancamentoExplain.ui-panelgrid.form-group .ui-panelgrid-cell {
	padding: 7px 16px;
}

.lancamentoExplain.ui-panelgrid.form-group .ui-panelgrid-cell:nth-child(1)
	{
	padding-top: 0;
}

.lessPaddingSides .ui-panelgrid-cell {
	padding-left: 5px !important;
	padding-right: 5px !important;
}

.traceRepasse tr:nth-child(3), .traceRepasse tr:nth-child(5),
	.traceRepasse tr:nth-child(12), .traceRepassePro tr:nth-child(1),
	.traceRepassePro tr:nth-child(3), .traceRepassePro tr:nth-child(5) {
	height: 40px;
	vertical-align: bottom;
}

.pnFiltroStatus .ui-panelgrid-cell.ui-g-1 {
	width: 2% !important;
}

body .fakeTable.ui-datatable tbody tr.ui-datatable-even {
	background: none;
}

body.layout-compact .fakeTable.ui-datatable thead th {
	display: none;
}

@media only screen and (max-width: 1500px) {
	.dlgCalculoRepasse .dlgCalculoRepassePnl {
		width: 100% !important;
	}
}

@media only screen and (max-width: 1000px) {
	.dlgCalculoRepasse {
		width: 80% !important;
	}
	.dlgCalculoRepasse .dlgCalculoRepassePnl {
		width: 100% !important;
	}
}
</style>

		<p:outputPanel id="viewFaturaRepasse">
			<ui:include src="faturaViewProfissional.xhtml">
				<ui:param name="showNewLancamento" value="N" />
			</ui:include>
			<p:remoteCommand name="onCloseFaturaView" />
		</p:outputPanel>

		<p:outputPanel id="viewMarcacaoPonto">
			<ui:include src="marcacaoponto.xhtml">
				<ui:param name="permiteEditarData" value="N" />
				<ui:param name="permiteEditarValor" value="S" />
			</ui:include>
			<p:remoteCommand name="onCloseMarcacaoPonto"
				actionListener="#{repasseProfissionalComReciboMB.pesquisarDiaria}"
				process="@this, :lume:tabViewRepasseProfissional:filtrosDiaria"
				update=":lume:tabViewRepasseProfissional:dtPrincipalRepasseDiaria"
				oncomplete="PF('dtPrincipalRepasseDiaria').filter();" />
		</p:outputPanel>


		<p:remoteCommand name="onHidePacienteFicha" process="@this"
			update=":lume:viewFaturaRepasse" />

		<p:dialog id="dlgPendencias" widgetVar="dlgPendencias"
			header="Pendências" responsive="true" modal="true" width="40%">
			<p:panel id="pnPendencias" styleClass="BordNone">
				<p:panelGrid columns="1" layout="grid"
					styleClass="ui-panelgrid-blank form-group ui-fluid removeSideGridPadding">
					<p:repeat value="#{repasseProfissionalComReciboMB.pendencias}"
						var="pendencia">
						<li style="margin-left: 10px;"><span>#{pendencia}</span></li>
					</p:repeat>
				</p:panelGrid>
			</p:panel>
		</p:dialog>


		<p:dialog id="dlgAjusteManual" widgetVar="dlgAjusteManual"
			header="Ajuste Manual" responsive="true" modal="true" width="50%">

			<p:outputPanel style="height: 80vh; max-height: 80vh;">
				<p:scrollPanel mode="native" style="height: 100%; width: 100%;">

					<p:panel id="pnAjuste" styleClass="BordNone" style="border: none">
						<p:outputPanel
							rendered="#{repasseProfissionalComReciboMB.entity.fatura.tipoLancamentos.rotulo == 'M'}">
							<br />
							<div class="card card-w-title"
								style="background-color: #d9534f; color: white; padding: 5px; margin-bottom: 0px; text-align: center">
								Esta fatura de repasse está em modo Manual.</div>
						</p:outputPanel>
						<br />
						<p:panelGrid columns="2" layout="grid"
							styleClass="ui-panelgrid-blank form-group ui-fluid"
							style="font-size:16px;font-weight:bold">
							<h:panelGroup styleClass="md-inputfield">
                              	Paciente: #{repasseProfissionalComReciboMB.entity.planoTratamento.paciente.dadosBasico.nome}
                              </h:panelGroup>
							<h:panelGroup styleClass="md-inputfield">
                              	Profissional Executor: #{repasseProfissionalComReciboMB.entity.planoTratamento.profissional.dadosBasico.nome}
                              </h:panelGroup>
							<h:panelGroup styleClass="md-inputfield">
                              	Plano de Tratamento: #{repasseProfissionalComReciboMB.entity.planoTratamento.descricao}
                              </h:panelGroup>
							<h:panelGroup styleClass="md-inputfield">
                              	Valor total á receber do Plano de Tratamento: 
                              	<h:outputText
									value="#{repasseProfissionalComReciboMB.valorTotalFatura}">
									<f:convertNumber currencySymbol="R$" maxFractionDigits="2"
										type="currency" />
								</h:outputText>
							</h:panelGroup>
						</p:panelGrid>
						<br />
						<div style="width: 100%; text-align: center;">
							<b><h:outputText value="Detalhes do Procedimento" /></b>
						</div>
						<br />
						<table style="width: 100%; border-collapse: collapse;">
							<thead>
								<tr>
									<th style="border: 1px solid #bdbdbd; padding: 5px; width: 40%">
										Descrição</th>
									<th style="border: 1px solid #bdbdbd; padding: 5px; width: 15%">
										Valor do procedimento</th>
									<th style="border: 1px solid #bdbdbd; padding: 5px; width: 15%">
										Valor de repasse</th>
									<th style="border: 1px solid #bdbdbd; padding: 5px; width: 15%">
										Valor já repassado</th>
									<th style="border: 1px solid #bdbdbd; padding: 5px; width: 15%">
										Valor disponível para repasse</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<th style="border: 1px solid #bdbdbd; padding: 5px; width: 20%">
										#{repasseProfissionalComReciboMB.entity.descricaoCompletaComFace}
									</th>
									<th style="border: 1px solid #bdbdbd; padding: 5px; width: 20%">
										<h:outputText
											value="#{repasseProfissionalComReciboMB.valorProcedimento}">
											<f:convertNumber currencySymbol="R$" maxFractionDigits="2"
												type="currency" />
										</h:outputText>
									</th>
									<th style="border: 1px solid #bdbdbd; padding: 5px; width: 10%">
										<h:outputText
											rendered="#{repasseProfissionalComReciboMB.entity.dentistaExecutor.tipoRemuneracao eq 'PRO'}"
											value="#{repasseProfissionalComReciboMB.valorBaseRepasse}">
											<f:convertNumber currencySymbol="R$" maxFractionDigits="2"
												type="currency" />
										</h:outputText> <h:outputText
											rendered="#{repasseProfissionalComReciboMB.entity.dentistaExecutor.tipoRemuneracao eq 'POR'}"
											value="#{repasseProfissionalComReciboMB.valorBaseRepasse} %">
											<f:convertNumber currencySymbol="" maxFractionDigits="0"
												type="currency" />
										</h:outputText>
									</th>
									<th style="border: 1px solid #bdbdbd; padding: 5px; width: 20%">
										<h:outputText
											value="#{repasseProfissionalComReciboMB.entity.valorPago}">
											<f:convertNumber currencySymbol="R$" maxFractionDigits="2"
												type="currency" />
										</h:outputText>
									</th>
									<th style="border: 1px solid #bdbdbd; padding: 5px; width: 20%">
										<h:outputText
											value="#{repasseProfissionalComReciboMB.entity.valorDisponivel}">
											<f:convertNumber currencySymbol="R$" maxFractionDigits="2"
												type="currency" />
										</h:outputText>
									</th>
								</tr>
							</tbody>
						</table>
						<br />
						<div style="width: 100%; text-align: center;">
							<b><h:outputText value="Detalhes do Recebimento do Paciente" /></b>
						</div>
						<br />
						<table style="width: 100%; border-collapse: collapse;">
							<thead>
								<tr>
									<th style="border: 1px solid #bdbdbd; padding: 5px; width: 20%">
										Forma de pagamento</th>
									<th style="border: 1px solid #bdbdbd; padding: 5px; width: 20%">
										Valor Recebido</th>
									<th style="border: 1px solid #bdbdbd; padding: 5px; width: 8%">
										Data de Recebimento</th>
									<th style="border: 1px solid #bdbdbd; padding: 5px; width: 8%">
										Data de Crédito</th>
									<th style="border: 1px solid #bdbdbd; padding: 5px; width: 20%">
										Status</th>
									<p:outputPanel
										rendered="#{repasseProfissionalComReciboMB.entity.dentistaExecutor.tipoRemuneracao eq 'POR'}">
										<th
											style="border: 1px solid #bdbdbd; padding: 5px; width: 24%">
											Valor com as Deduções</th>
									</p:outputPanel>
									<th style="border: 1px solid #bdbdbd; padding: 5px; width: 24%">
										Valor Calculado de Repasse</th>
								</tr>
							</thead>
							<tbody>
								<ui:repeat var="lancamento"
									value="#{repasseProfissionalComReciboMB.lancamentosDeOrigem}">
									<tr>
										<th
											style="border: 1px solid #bdbdbd; padding: 5px; width: 20%">
											#{lancamento.formaPagamentoStr}</th>
										<th
											style="border: 1px solid #bdbdbd; padding: 5px; width: 10%">
											<h:outputText
												value="#{lancamento.dadosCalculoPercPagtoFaturaStr}">
												<f:convertNumber maxFractionDigits="2" type="percent" />
											</h:outputText>
										</th>
										<th
											style="border: 1px solid #bdbdbd; padding: 5px; width: 20%">
											#{lancamento.dataPagamentoStr}</th>
										<th
											style="border: 1px solid #bdbdbd; padding: 5px; width: 20%">
											#{lancamento.dataCreditoStr}</th>
										<th
											style="border: 1px solid #bdbdbd; padding: 5px; width: 20%">
											#{lancamento.statusCompleto}</th>

										<p:outputPanel
											rendered="#{repasseProfissionalComReciboMB.entity.dentistaExecutor.tipoRemuneracao eq 'POR'}">
											<th
												style="border: 1px solid #bdbdbd; padding: 5px; width: 20%">
												<p:commandLink process="@this" title="Deduções"
													actionListener="#{repasseProfissionalComReciboMB.loadDeducoes(lancamento)}"
													oncomplete="PF('dlgDeducoes').show()"
													update="lume:painelDeducoes">
													<h:outputText
														value="#{lancamento.dadosCalculoRecebidoMenosReducao}">
														<f:convertNumber currencySymbol="R$" maxFractionDigits="2"
															type="currency" />
													</h:outputText>
												</p:commandLink>
											</th>
										</p:outputPanel>
										<th
											style="border: 1px solid #bdbdbd; padding: 5px; width: 20%">
											<h:outputText
												value="#{lancamento.dadosCalculoValorARepassarSemCusto}">
												<f:convertNumber currencySymbol="R$" maxFractionDigits="2"
													type="currency" />
											</h:outputText>
										</th>
									</tr>
								</ui:repeat>
							</tbody>
						</table>
						<p:panelGrid columns="2" layout="grid"
							styleClass="ui-panelgrid-blank ui-fluid form-group removeSecondPadding"
							style="border:0px none; background-color:transparent;">
							<h:panelGroup>
								<p:outputLabel for="valorRepassar" value="Valor á repassar:" />
								<p:inputNumber id="valorRepassar"
									value="#{repasseProfissionalComReciboMB.valorRepassar}"
									maxlength="13" maxValue="9999999999.99" decimalSeparator=","
									symbol="R$ " thousandSeparator=".">
								</p:inputNumber>
							</h:panelGroup>
						</p:panelGrid>
						<ui:remove>
							<p:panelGrid columns="2" layout="grid"
								styleClass="ui-panelgrid-blank ui-fluid form-group removeSecondPadding"
								style="border:0px none; background-color:transparent;">
								<h:panelGroup>
									<p:selectBooleanCheckbox id="agendarParaData"
										value="#{repasseProfissionalComReciboMB.agendarParaData}">
										<p:ajax process="@this,agendarParaData"
											update="painelDataValorRestante,ignorarRestante"
											listener="#{repasseProfissionalComReciboMB.mudaCheckboxAjuste('agendarParaData')}" />
									</p:selectBooleanCheckbox>
									<p:outputLabel for="agendarParaData"
										value="Agendar total do valor restante para uma única data" />
									<h:outputLabel class="fa fa-question" id="tooltipUnicaData"
										style="font-size:18px; margin-left:10px;" />
									<p:tooltip for="tooltipUnicaData" position="bottom"
										value="#{tarifaMB.getTooltipValue('repasseComRecibo', 'unicaData')}" />
								</h:panelGroup>
								<h:panelGroup id="painelDataValorRestante">
									<p:outputLabel for="dataValorRestante"
										value="Data do valor restante:" />
									<p:calendar id="dataValorRestante"
										required="#{repasseProfissionalComReciboMB.agendarParaData == true}"
										disabled="#{repasseProfissionalComReciboMB.agendarParaData == false}"
										value="#{repasseProfissionalComReciboMB.dataValorRestante}"
										autocomplete="false" />
								</h:panelGroup>
							</p:panelGrid>
						</ui:remove>
						<p:panelGrid columns="1" layout="grid"
							styleClass="ui-panelgrid-blank ui-fluid form-group removeSecondPadding"
							style="border:0px none; background-color:transparent;">
							<h:panelGroup>
								<p:selectBooleanCheckbox id="ignorarRestante"
									value="#{repasseProfissionalComReciboMB.ignorarRestante}">
									<p:ajax process="@this"
										listener="#{repasseProfissionalComReciboMB.mudaCheckboxAjuste('ignorarRestante')}" />
								</p:selectBooleanCheckbox>
								<p:outputLabel for="ignorarRestante"
									value="Ignorar Valor Restante" />
								<h:outputLabel class="fa fa-question"
									id="tooltipIgnorarRestante"
									style="font-size:18px; margin-left:10px;" />
								<p:tooltip for="tooltipIgnorarRestante" position="bottom"
									value="#{tarifaMB.getTooltipValue('repasseComRecibo', 'ignorarRestante')}" />
							</h:panelGroup>

							<p:outputPanel>
								<div class="card card-w-title"
									style="background-color: #d9534f; color: white; padding: 5px; margin-bottom: 0px; text-align: center">
									Ao clicar em "Salvar", a fatura não receberá mais atualizações
									automáticas nos valores, e o repasse será inteiramente manual.</div>
							</p:outputPanel>
						</p:panelGrid>
					</p:panel>

				</p:scrollPanel>
			</p:outputPanel>
			<p:panelGrid columns="2" layout="grid"
				styleClass="ui-panelgrid-blank form-group ui-fluid removeSideGridPadding">
				<p:commandButton icon="White fa fa-save" value="Salvar"
					update="pnAjuste, painelJustificativa"
					process="@this ,:lume:pnAjuste" styleClass="GreenButton"
					onsuccess="PF('dlgJustificativa').show();" />
				<p:commandButton icon="White fa fa-file-o" value="Fechar"
					oncomplete="PF('dlgAjusteManual').hide();" immediate="true" />
			</p:panelGrid>

		</p:dialog>

		<p:dialog id="dlgDeducoes" widgetVar="dlgDeducoes" width="30%"
			header="Deduções do Lançamento" responsive="true" modal="true"
			appendTo=":lume">
			<p:ajax event="close" update="" process="@this" />
			<p:outputPanel id="painelDeducoes">
				<table style="width: 100%; border-collapse: collapse;"
					rendered="#{repasseProfissionalComReciboMB.entity.planoTratamento.profissional.tipoRemuneracao eq 'POR'}">
					<thead>
						<tr>
							<th style="border: 1px solid #bdbdbd;">Tipo</th>
							<th style="border: 1px solid #bdbdbd;">Base de cálculo</th>
							<th style="border: 1px solid #bdbdbd;">Valor da dedução</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<th style="border: 1px solid #bdbdbd;">Taxa</th>
							<th style="border: 1px solid #bdbdbd;"><h:outputText
									value="#{repasseProfissionalComReciboMB.lancamentoDeducoes.dadosCalculoPercTaxa}">
									<f:convertNumber maxFractionDigits="2" type="percent" />
								</h:outputText></th>
							<th style="border: 1px solid #bdbdbd;"><h:outputText
									value="#{repasseProfissionalComReciboMB.lancamentoDeducoes.dadosCalculoValorTaxa}">
									<f:convertNumber currencySymbol="R$" maxFractionDigits="2"
										type="currency" />
								</h:outputText></th>
						</tr>
						<tr>
							<th style="border: 1px solid #bdbdbd;">Tarifa</th>
							<th style="border: 1px solid #bdbdbd;"></th>
							<th style="border: 1px solid #bdbdbd;"><h:outputText
									value="#{repasseProfissionalComReciboMB.lancamentoDeducoes.dadosCalculoValorTarifa}">
									<f:convertNumber currencySymbol="R$" maxFractionDigits="2"
										type="currency" />
								</h:outputText></th>
						</tr>
						<tr>
							<th style="border: 1px solid #bdbdbd;">Tributo</th>
							<th style="border: 1px solid #bdbdbd;"><h:outputText
									value="#{repasseProfissionalComReciboMB.lancamentoDeducoes.dadosCalculoPercTributo}">
									<f:convertNumber maxFractionDigits="2" type="percent" />
								</h:outputText></th>
							<th style="border: 1px solid #bdbdbd;"><h:outputText
									value="#{repasseProfissionalComReciboMB.lancamentoDeducoes.dadosCalculoValorTributo}">
									<f:convertNumber currencySymbol="R$" maxFractionDigits="2"
										type="currency" />
								</h:outputText></th>
						</tr>
						<tr>
							<th style="border: 1px solid #bdbdbd;">Custo Direto</th>
							<th style="border: 1px solid #bdbdbd;"><h:outputText
									value="#{repasseProfissionalComReciboMB.lancamentoDeducoes.dadosCalculoPercCustoDireto}">
									<f:convertNumber maxFractionDigits="2" type="percent" />
								</h:outputText></th>
							<th style="border: 1px solid #bdbdbd;"><h:outputText
									value="#{repasseProfissionalComReciboMB.lancamentoDeducoes.dadosCalculoValorCustoDiretoRateado}">
									<f:convertNumber currencySymbol="R$" maxFractionDigits="2"
										type="currency" />
								</h:outputText></th>
						</tr>
					</tbody>
				</table>
				<br />
				<div class="card card-w-title"
					style="font-size: 16px; font-weight: bold; text-align: center">
					Total das deduções:
					<h:outputText
						value="#{repasseProfissionalComReciboMB.lancamentoDeducoes.dadosCalculoTotalReducao}">
						<f:convertNumber currencySymbol="R$" maxFractionDigits="2"
							type="currency" />
					</h:outputText>


				</div>
				<br />

			</p:outputPanel>
		</p:dialog>


		<p:dialog id="dlgJustificativa" widgetVar="dlgJustificativa"
			header="Justificativa - Ajuste Manual" responsive="true" modal="true"
			appendTo=":lume">
			<p:ajax event="close" update="" process="@this" />
			<p:outputPanel id="painelJustificativa">
				<p:panelGrid columns="1" layout="grid"
					style="max-height: 500px; overflow-y: auto;"
					styleClass="ui-panelgrid-blank form-group ui-fluid removeSideGridPadding removeAltGridPadding">
				</p:panelGrid>
				<p:panelGrid columns="1" layout="grid"
					styleClass="ui-panelgrid-blank form-group ui-fluid removeSideGridPadding">
					<h:panelGroup styleClass="lumeField">
						<p:outputLabel for="justificativa" value="Justificativa: " />
						<p:inputTextarea id="justificativa" cols="60" rows="6"
							autoResize="false"
							value="#{repasseProfissionalComReciboMB.justificativa}"
							maxlength="2000" required="true" />
						<p:message for="justificativa" styleClass="msg" />
					</h:panelGroup>
				</p:panelGrid>
			</p:outputPanel>
			<p:separator styleClass="SeparatorFull" />
			<p:panelGrid columns="3" layout="grid"
				styleClass="ui-panelgrid-blank form-group ui-fluid removeSideGridPadding">
				<p:commandButton id="persistJustificativa" icon="White fa fa-save"
					value="Salvar"
					actionListener="#{repasseProfissionalComReciboMB.actionAjusteManual}"
					update="painelJustificativa" process="@this,painelJustificativa"
					oncomplete="PF('dtPrincipalRepasse').filter();" />
			</p:panelGrid>
		</p:dialog>




		<p:dialog widgetVar="dlgImprimirReciboRepasse" resizable="false"
			header="Imprimir recibo de pagamento"
			onHide="PF('dlgImprimirReciboRepasse').toggleMaximize();"
			onShow="PF('dlgImprimirReciboRepasse').toggleMaximize();"
			modal="true" appendTo=":lume">
			<p:outputPanel id="imprimirReciboReciboPnl"
				style="max-height: calc(100% - 54px); height: calc(100% - 54px);"
				styleClass="remove12ColPaddingSide">
				<p:scrollPanel mode="native"
					style="position: relative; width: 100%; height: calc(100% - 20px);">
					<p:outputPanel style="padding: 10px;" id="impressHere">
						<div style="font-size: 10pt">
							<ui:remove>
								<p:outputPanel
									rendered="#{reciboRepasseProfissionalMB.entity.aprovado != 'S'}">
									<div
										style="width: calc(100% - 42px); border: 1px solid #bdbdbd; text-align: center; padding: 20px;">
										<h:outputText escape="false"
											value="Este recibo ainda não foi &lt;b&gt;aprovado&lt;/b&gt;, portanto não reflete o valor real de repasse" />
									</div>

									<br />
								</p:outputPanel>
							</ui:remove>
							<div style="width: 100%; display: flex">
								<h:panelGroup
									style="text-align: center; border: 1px solid #bdbdbd; width: 24.25%; padding: 12px 16px;">
									<span> <b><h:outputText value="Profissional" /></b>
									</span>
									<br />
									<span> <h:outputText
											value="#{reciboRepasseProfissionalMB.entity.profissional.dadosBasico.nome}" />
									</span>
								</h:panelGroup>
								<div style="width: 1%" />
								<h:panelGroup
									style="text-align: center; border: 1px solid #bdbdbd; width: 24.25%; padding: 12px 16px;">
									<span> <b><h:outputText
												rendered="#{reciboRepasseProfissionalMB.showIfCalculo(reciboRepasseProfissionalMB.entity)}"
												value="Quantidade de repasses" /></b> <b><h:outputText
												rendered="#{reciboRepasseProfissionalMB.showIfDiaria(reciboRepasseProfissionalMB.entity)}"
												value="Quantidade de Diárias" /></b>
									</span>
									<br />
									<span> <h:outputText
											value="#{reciboRepasseProfissionalMB.entity.quantidadeRepasses}" />
									</span>
								</h:panelGroup>
								<div style="width: 1%" />
								<h:panelGroup
									style="text-align: center; border: 1px solid #bdbdbd; width: 24.25%; padding: 12px 16px;">
									<span> <b><h:outputText
												value="Valor total do repasse" /></b>
									</span>
									<br />
									<span> <h:outputText
											value="#{reciboRepasseProfissionalMB.entity.valorTotalRepasse}">
											<f:convertNumber type="currency" currencySymbol="R$"
												maxFractionDigits="2" />
										</h:outputText>
									</span>
								</h:panelGroup>
								<div style="width: 1%" />
								<h:panelGroup
									style="text-align: center; border: 1px solid #bdbdbd; width: 24.25%; padding: 12px 16px;">
									<span> <b><h:outputText value="Data de Pagamento" /></b>
									</span>
									<br />
									<span> <h:outputText
											value="#{reciboRepasseProfissionalMB.entity.dataPagamento}">
											<f:convertDateTime pattern="dd/MM/yyyy" />
										</h:outputText>
									</span>
								</h:panelGroup>
							</div>
							<br />
							<p:outputPanel
								rendered="#{reciboRepasseProfissionalMB.showIfCalculo(reciboRepasseProfissionalMB.entity)}">
								<table style="width: 100%; border-collapse: collapse;">
									<thead>
										<tr>
											<th
												style="border: 1px solid #bdbdbd; padding: 5px; width: 20%">Procedimento</th>
											<th
												style="border: 1px solid #bdbdbd; padding: 5px; width: 10%">Data
												de execução</th>
											<th
												style="border: 1px solid #bdbdbd; padding: 5px; width: 20%">Plano
												de Tratamento</th>
											<th
												style="border: 1px solid #bdbdbd; padding: 5px; width: 20%">Paciente</th>
											<th
												style="border: 1px solid #bdbdbd; padding: 5px; width: 10%">Valor
												Total</th>
											<th
												style="border: 1px solid #bdbdbd; padding: 5px; width: 10%">Valor
												já pago</th>
											<th
												style="border: 1px solid #bdbdbd; padding: 5px; width: 10%">Valor
												à pagar</th>
										</tr>
									</thead>
									<tbody>
										<ui:repeat var="reciboLancamento"
											value="#{reciboRepasseProfissionalMB.entity.reciboLancamentos}">
											<tr>
												<p:outputPanel rendered="#{reciboLancamento.dados == null}">
													<td style="border: 1px solid #bdbdbd; padding: 5px;"><h:outputText
															value="#{reciboLancamento.lancamento.ptp.descricaoCompletaComFace}" /></td>
													<td
														style="border: 1px solid #bdbdbd; padding: 5px; text-align: center;"><h:outputText
															value="#{reciboLancamento.lancamento.ptp.dataFinalizadoStr}">

														</h:outputText></td>
													<td
														style="border: 1px solid #bdbdbd; padding: 5px; text-align: center;"><h:outputText
															value="#{reciboLancamento.lancamento.ptp.planoTratamento.descricao}" /></td>
													<td
														style="border: 1px solid #bdbdbd; padding: 5px; text-align: center;"><h:outputText
															value="#{reciboLancamento.lancamento.ptp.planoTratamento.paciente.dadosBasico.nome}" /></td>
													<td
														style="border: 1px solid #bdbdbd; padding: 5px; text-align: center;"><h:outputText
															value="#{reciboLancamento.valorTotalRepassar}">
															<f:convertNumber type="currency" currencySymbol="R$"
																maxFractionDigits="2" />
														</h:outputText></td>
													<td
														style="border: 1px solid #bdbdbd; padding: 5px; text-align: center;"><h:outputText
															value="#{(reciboLancamento.lancamento.valorComDesconto != null and reciboLancamento.lancamento.valorComDesconto != 0 ? reciboLancamento.lancamento.valorComDesconto : reciboLancamento.lancamento.valor)}">
															<f:convertNumber type="currency" currencySymbol="R$"
																maxFractionDigits="2" />
														</h:outputText> <h:outputText
															rendered="#{reciboLancamento.lancamento.fatura.valorRestanteIgnoradoAjusteManual or reciboLancamento.lancamento.valor > reciboLancamento.dados.valorTotal}"
															value=" *">
														</h:outputText></td>
												</p:outputPanel>
												<p:outputPanel rendered="#{reciboLancamento.dados != null}">
													<td style="border: 1px solid #bdbdbd; padding: 5px;"><h:outputText
															value="#{reciboLancamento.dados.planoTratamentoProcedimento}" /></td>
													<td
														style="border: 1px solid #bdbdbd; padding: 5px; text-align: center;"><h:outputText
															value="#{reciboLancamento.dados.dataExecucao}">
															<f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss" />
														</h:outputText></td>
													<td
														style="border: 1px solid #bdbdbd; padding: 5px; text-align: center;"><h:outputText
															value="#{reciboLancamento.dados.planoTratamento}" /></td>
													<td
														style="border: 1px solid #bdbdbd; padding: 5px; text-align: center;"><h:outputText
															value="#{reciboLancamento.dados.paciente}" /></td>
													<td
														style="border: 1px solid #bdbdbd; padding: 5px; text-align: center;"><h:outputText
															value="#{reciboLancamento.dados.valorTotal}">
															<f:convertNumber type="currency" currencySymbol="R$"
																maxFractionDigits="2" />
														</h:outputText></td>
													<td
														style="border: 1px solid #bdbdbd; padding: 5px; text-align: center;"><h:outputText
															value="#{reciboLancamento.dados.valorJaPago}">
															<f:convertNumber type="currency" currencySymbol="R$"
																maxFractionDigits="2" />
														</h:outputText></td>
													<td
														style="border: 1px solid #bdbdbd; padding: 5px; text-align: center;"><h:outputText
															value="#{reciboLancamento.dados.valorAPagar}">
															<f:convertNumber type="currency" currencySymbol="R$"
																maxFractionDigits="2" />
														</h:outputText> <h:outputText
															rendered="#{reciboLancamento.lancamento.fatura.valorRestanteIgnoradoAjusteManual or reciboLancamento.lancamento.valor > reciboLancamento.dados.valorTotal}"
															value=" *">
														</h:outputText></td>
												</p:outputPanel>
											</tr>
										</ui:repeat>
									</tbody>
								</table>
							</p:outputPanel>
							<p:outputPanel
								rendered="#{reciboRepasseProfissionalMB.showIfDiaria(reciboRepasseProfissionalMB.entity)}">
								<table style="width: 100%; border-collapse: collapse;">
									<thead>
										<tr>
											<th
												style="border: 1px solid #bdbdbd; padding: 5px; width: 15%">Data</th>
											<th
												style="border: 1px solid #bdbdbd; padding: 5px; width: 55%;
												display:#{(repasseProfissionalComReciboMB.imprimirSemProcedimento)?'none':'table-cell'};">Procedimentos</th>
											<th
												style="border: 1px solid #bdbdbd; padding: 5px; width: 15%">Tipo</th>
											<th
												style="border: 1px solid #bdbdbd; padding: 5px; width: 15%">Valor</th>
										</tr>
									</thead>
									<tbody>
										<ui:repeat var="reciboDiaria"
											value="#{reciboRepasseProfissionalMB.entity.reciboDiarias}">
											<tr>
												<p:outputPanel rendered="#{reciboDiaria.dados == null}">
													<td
														style="border: 1px solid #bdbdbd; padding: 5px; text-align: center;"><h:outputText
															value="#{reciboDiaria.diaria.dataPontoStr}" /></td>
													<td
														style="border: 1px solid #bdbdbd; padding: 5px;
														display:#{(repasseProfissionalComReciboMB.imprimirSemProcedimento)?'none':'table-cell'};"><h:outputText
															value="#{reciboDiaria.diaria.allPTPsDiaria}" /></td>
													<td
														style="border: 1px solid #bdbdbd; padding: 5px; text-align: center;"><h:outputText
															value="#{reciboDiaria.diaria.tipoPonto.descricao}" /></td>
													<td
														style="border: 1px solid #bdbdbd; padding: 5px; text-align: center;"><h:outputText
															value="#{reciboDiaria.diaria.valorDiaria}">
															<f:convertNumber type="currency" currencySymbol="R$"
																maxFractionDigits="2" />
														</h:outputText></td>
												</p:outputPanel>
												<p:outputPanel rendered="#{reciboDiaria.dados != null}">
													<td
														style="border: 1px solid #bdbdbd; padding: 5px; text-align: center;"><h:outputText
															value="#{reciboDiaria.dados.dataDiariaStr}" /></td>
													<td
														style="border: 1px solid #bdbdbd; padding: 5px;
														display:#{(repasseProfissionalComReciboMB.imprimirSemProcedimento)?'none':'table-cell'};"><h:outputText
															value="#{reciboDiaria.dados.procedimentos}" /></td>
													<td
														style="border: 1px solid #bdbdbd; padding: 5px; text-align: center;"><h:outputText
															value="#{reciboDiaria.dados.tipoPonto.descricao}" /></td>
													<td
														style="border: 1px solid #bdbdbd; padding: 5px; text-align: center;"><h:outputText
															value="#{reciboDiaria.dados.valorDiaria}">
															<f:convertNumber type="currency" currencySymbol="R$"
																maxFractionDigits="2" />
														</h:outputText></td>
												</p:outputPanel>
											</tr>
										</ui:repeat>
									</tbody>
								</table>
							</p:outputPanel>
							<br />
							<div style="width: 100%; height: 80px;">
								<div
									style="width: 40%; height: 40px; border-bottom: solid 1px black;"></div>
								<span> <h:outputText
										value="#{reciboRepasseProfissionalMB.entity.profissional.dadosBasico.nome} - #{reciboRepasseProfissionalMB.entity.profissional.dadosBasico.documento}" />
								</span>

							</div>
						</div>

					</p:outputPanel>

				</p:scrollPanel>

				<h:panelGroup style="display:block;margin-left:3px;">
					<p:selectBooleanCheckbox id="checkFiltro"
						rendered="#{reciboRepasseProfissionalMB.showIfDiaria(reciboRepasseProfissionalMB.entity)}"
						value="#{repasseProfissionalComReciboMB.imprimirSemProcedimento}">
						<p:ajax event="change" process="@this,lume:impressHere"
							update="lume:impressHere" />
					</p:selectBooleanCheckbox>
					<p:outputLabel for="checkFiltro"
						value="Omitir procedimentos na impressão"
						rendered="#{reciboRepasseProfissionalMB.showIfDiaria(reciboRepasseProfissionalMB.entity)}" />
				</h:panelGroup>

			</p:outputPanel>


			<p:panelGrid columns="4" layout="grid"
				styleClass="ui-panelgrid-blank form-group ui-fluid removeSideGridPadding">
				<p:commandButton styleClass="NavyButton" value="Impressão"
					process="@this" icon="fa fa-printer">
					<p:printer target=":lume:impressHere" />
				</p:commandButton>
				<p:column />
				<p:column />
				<p:commandButton styleClass="NavyButton" value="Fechar"
					process="@this" oncomplete="PF('dlgImprimirReciboRepasse').hide()" />
			</p:panelGrid>
		</p:dialog>


		<p:dialog widgetVar="dlgVisualizarRecibo" resizable="false"
			header="Visualizar recibo de pagamento"
			onHide="PF('dlgVisualizarRecibo').toggleMaximize();"
			onShow="PF('dlgVisualizarRecibo').toggleMaximize();" modal="true"
			appendTo=":lume">
			<p:outputPanel id="visualizarReciboPnl"
				style="max-height: calc(100% - 54px); height: calc(100% - 54px);"
				styleClass="remove12ColPaddingSide">
				<p:scrollPanel mode="native"
					style="position: relative; width: 100%; height: 100%;">

					<p:outputPanel style="padding: 10px; padding-top: 0px">
						<p:panelGrid columns="3" layout="grid"
							styleClass="ui-panelgrid-blank ui-fluid form-group removeSideGridPadding centerPanels lessPaddingSides">
							<p:panel header="Profissional">
								<h:outputText
									value="#{reciboRepasseProfissionalMB.entity.profissional.dadosBasico.nome}" />
							</p:panel>
							<p:panel header="Valor Total de Repasse">
								<h:outputText
									value="#{reciboRepasseProfissionalMB.entity.valorTotalRepasse}">
									<f:convertNumber currencySymbol="R$ " type="currency" />
								</h:outputText>
							</p:panel>
							<p:panel header="Pago?">
								<h:outputText
									value="#{reciboRepasseProfissionalMB.entity.aprovadoStr}" />
							</p:panel>
						</p:panelGrid>

						<p:panelGrid columns="3" layout="grid"
							styleClass="ui-panelgrid-blank ui-fluid form-group">

							<h:panelGroup>
								<p:splitButton icon="White fa fa fa-file-excel-o"
									value="Exportar tabela para Excel"
									styleClass="GreenSplitButton" process="@this" update="@this">

									<p:dataExporter type="xls" target="dtReciboRepasseLancamentos"
										fileName="Procedimentos" encoding="ISO-8859-1" />

									<p:menuitem value="Exportar tabela para PDF"
										icon="fa fa fa-file-pdf-o" process="@this">
										<p:dataExporter type="pdf" target="dtReciboRepasseLancamentos"
											fileName="Procedimentos" encoding="ISO-8859-1" />
									</p:menuitem>
									<p:menuitem value="Exportar tabela para CSV"
										icon="fa fa fa-file-pdf-o" process="@this">
										<p:dataExporter type="csv" target="dtReciboRepasseLancamentos"
											fileName="Procedimentos" encoding="ISO-8859-1" />
									</p:menuitem>

								</p:splitButton>
							</h:panelGroup>
						</p:panelGrid>

						<p:dataTable
							rendered="#{reciboRepasseProfissionalMB.showIfCalculo(reciboRepasseProfissionalMB.entity)}"
							value="#{reciboRepasseProfissionalMB.entity.reciboLancamentos}"
							var="reciboLancamento" filterDelay="1000" reflow="true"
							emptyMessage="Nenhum repasse encontrado"
							widgetVar="dtReciboRepasseLancamentos"
							id="dtReciboRepasseLancamentos" rows="15" paginator="true"
							paginatorPosition="bottom" rowKey="#{reciboLancamento}"
							binding="#{reciboRepasseProfissionalMB.tabelaLancamentosRecibos}">

							<f:facet name="header">
								<h:outputText value="Repasses de Profissionais" />
							</f:facet>

							<p:column rendered="#{reciboLancamento.dados == null}"
								exportable="false" filterMatchMode="contains"
								headerText="Procedimento" width="15%"
								filterBy="#{reciboLancamento.lancamento.ptp.descricaoCompletaComFace}"
								sortBy="#{reciboLancamento.lancamento.ptp.descricaoCompletaComFace}">
								<h:outputText title="#{reciboLancamento.lancamento.id}"
									value="#{reciboLancamento.lancamento.ptp.descricaoCompletaComFace}" />
							</p:column>
							<p:column rendered="#{reciboLancamento.dados != null}"
								exportable="false" width="15%" filterMatchMode="contains"
								headerText="Procedimento"
								filterBy="#{reciboLancamento.dados.planoTratamentoProcedimento}"
								sortBy="#{reciboLancamento.dados.planoTratamentoProcedimento}">
								<h:outputText title="#{reciboLancamento.lancamento.id}"
									value="#{reciboLancamento.dados.planoTratamentoProcedimento}" />
							</p:column>

							<p:column rendered="#{reciboLancamento.dados == null}"
								filterMatchMode="contains" headerText="Data de execução"
								filterBy="#{reciboLancamento.lancamento.ptp.dataFinalizado}"
								sortBy="#{reciboLancamento.lancamento.ptp.dataFinalizado}"
								width="10%">
								<h:outputText
									value="#{reciboLancamento.lancamento.ptp.dataFinalizado}">
									<f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss" />
								</h:outputText>
							</p:column>
							<p:column rendered="#{reciboLancamento.dados != null}"
								filterMatchMode="contains" headerText="Data de execução"
								filterBy="#{reciboLancamento.dados.dataExecucao}"
								sortBy="#{reciboLancamento.dados.dataExecucao}" width="10%">
								<h:outputText value="#{reciboLancamento.dados.dataExecucao}">
									<f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss" />
								</h:outputText>
							</p:column>

							<p:column rendered="#{reciboLancamento.dados == null}"
								width="10%" filterMatchMode="contains"
								headerText="Plano de Tratamento"
								filterBy="#{reciboLancamento.lancamento.ptp.planoTratamento.descricao}"
								sortBy="#{reciboLancamento.lancamento.ptp.planoTratamento.descricao}">
								<h:outputText
									value="#{reciboLancamento.lancamento.ptp.planoTratamento.descricao}" />
							</p:column>
							<p:column rendered="#{reciboLancamento.dados != null}"
								width="10%" filterMatchMode="contains"
								headerText="Plano de Tratamento"
								filterBy="#{reciboLancamento.dados.planoTratamento}"
								sortBy="#{reciboLancamento.dados.planoTratamento}">
								<h:outputText value="#{reciboLancamento.dados.planoTratamento}" />
							</p:column>

							<p:column rendered="#{reciboLancamento.dados == null}"
								width="15%" filterMatchMode="contains" headerText="Paciente"
								filterBy="#{reciboLancamento.lancamento.ptp.planoTratamento.paciente.dadosBasico.nome}"
								sortBy="#{reciboLancamento.lancamento.ptp.planoTratamento.paciente.dadosBasico.nome}">
								<h:outputText
									value="#{reciboLancamento.lancamento.ptp.planoTratamento.paciente.dadosBasico.nome}" />
							</p:column>
							<p:column rendered="#{reciboLancamento.dados != null}"
								width="15%" filterMatchMode="contains" headerText="Paciente"
								filterBy="#{reciboLancamento.dados.paciente}"
								sortBy="#{reciboLancamento.dados.paciente}">
								<h:outputText value="#{reciboLancamento.dados.paciente}" />
							</p:column>

							<p:column rendered="#{reciboLancamento.dados == null}"
								filterMatchMode="contains" headerText="Valor Total"
								filterBy="#{reciboLancamento.valorTotalRepassar}"
								sortBy="#{reciboLancamento.valorTotalRepassar}" width="10%">
								<h:outputText value="#{reciboLancamento.valorTotalRepassar}">
									<f:convertNumber currencySymbol="R$" maxFractionDigits="2"
										type="currency" />
								</h:outputText>
							</p:column>
							<p:column rendered="#{reciboLancamento.dados != null}"
								filterMatchMode="contains" headerText="Valor Total"
								filterBy="#{reciboLancamento.dados.valorTotal}"
								sortBy="#{reciboLancamento.dados.valorTotal}" width="10%">
								<h:outputText value="#{reciboLancamento.dados.valorTotal}">
									<f:convertNumber currencySymbol="R$" maxFractionDigits="2"
										type="currency" />
								</h:outputText>
							</p:column>

							<p:column filterMatchMode="contains" headerText="Valor já pago"
								filterBy="#{reciboLancamento.dados.valorJaPago}"
								sortBy="#{reciboLancamento.dados.valorJaPago}" width="10%">
								<h:outputText value="#{reciboLancamento.dados.valorJaPago}">
									<f:convertNumber currencySymbol="R$" maxFractionDigits="2"
										type="currency" />
								</h:outputText>
							</p:column>

							<p:column rendered="#{reciboLancamento.dados == null}"
								filterMatchMode="contains" headerText="Valor à pagar"
								filterBy="#{reciboLancamento.lancamento.valor}"
								sortBy="#{reciboLancamento.lancamento.valor}" width="10%">
								<h:outputText value="#{reciboLancamento.lancamento.valor}">
									<f:convertNumber currencySymbol="R$" maxFractionDigits="2"
										type="currency" />
								</h:outputText>
								<h:outputText
									rendered="#{reciboLancamento.lancamento.fatura.valorRestanteIgnoradoAjusteManual or reciboLancamento.lancamento.valor > reciboLancamento.dados.valorTotal}"
									value=" *">
								</h:outputText>
							</p:column>
							<p:column rendered="#{reciboLancamento.dados != null}"
								filterMatchMode="contains" headerText="Valor à pagar"
								filterBy="#{reciboLancamento.dados.valorAPagar}"
								sortBy="#{reciboLancamento.dados.valorAPagar}" width="10%">
								<h:outputText value="#{reciboLancamento.dados.valorAPagar}">
									<f:convertNumber currencySymbol="R$" maxFractionDigits="2"
										type="currency" />
								</h:outputText>

								<h:outputText
									rendered="#{reciboLancamento.lancamento.fatura.valorRestanteIgnoradoAjusteManual or reciboLancamento.lancamento.valor > reciboLancamento.dados.valorTotal}"
									value=" *">
								</h:outputText>

							</p:column>


						</p:dataTable>

						<p:dataTable
							rendered="#{reciboRepasseProfissionalMB.showIfDiaria(reciboRepasseProfissionalMB.entity)}"
							value="#{reciboRepasseProfissionalMB.entity.reciboDiarias}"
							var="reciboDiaria" filterDelay="1000" reflow="true"
							emptyMessage="Nenhum repasse encontrado"
							widgetVar="dtReciboRepasseDiarias" id="dtReciboRepasseDiarias"
							rows="15" paginator="true" paginatorPosition="bottom"
							rowKey="#{reciboDiaria}">
							<f:facet name="header">
								<h:outputText value="Repasses de Profissionais" />
							</f:facet>

							<p:column filterMatchMode="contains" headerText="Data da Diária"
								width="10%" filterBy="#{reciboDiaria.diaria.dataPontoStr}"
								sortBy="#{reciboDiaria.diaria.dataPontoStr}">
								<h:outputText value="#{reciboDiaria.diaria.dataPontoStr}" />
							</p:column>

							<p:column rendered="#{reciboDiaria.dados == null}"
								filterMatchMode="contains" headerText="Procedimentos"
								filterBy="#{reciboDiaria.diaria.allPTPsDiaria}"
								sortBy="#{reciboDiaria.diaria.allPTPsDiaria}">
								<h:outputText styleClass="left"
									value="#{reciboDiaria.diaria.allPTPsDiaria}" />
							</p:column>
							<p:column rendered="#{reciboDiaria.dados != null}"
								filterMatchMode="contains" headerText="Procedimentos"
								filterBy="#{reciboDiaria.dados.procedimentos}"
								sortBy="#{reciboDiaria.dados.procedimentos}">
								<div align="left">
									<h:outputText value="#{reciboDiaria.dados.procedimentos}" />
								</div>
							</p:column>

							<p:column rendered="#{reciboDiaria.dados == null}"
								filterMatchMode="contains" headerText="Tipo da Diária"
								width="10%"
								filterBy="#{reciboDiaria.diaria.tipoPonto.descricao}"
								sortBy="#{reciboDiaria.diaria.tipoPonto.descricao}">
								<div align="left">
									<h:outputText
										value="#{reciboDiaria.diaria.tipoPonto.descricao}" />
								</div>
							</p:column>
							<p:column rendered="#{reciboDiaria.dados != null}" width="10%"
								filterMatchMode="contains" headerText="Tipo da Diária"
								filterBy="#{reciboDiaria.dados.tipoPonto.descricao}"
								sortBy="#{reciboDiaria.dados.tipoPonto.descricao}">
								<h:outputText value="#{reciboDiaria.dados.tipoPonto.descricao}" />
							</p:column>

							<p:column rendered="#{reciboDiaria.dados == null}"
								filterMatchMode="contains" headerText="Valor da Diária"
								width="10%" filterBy="#{reciboDiaria.diaria.valorDiaria}"
								sortBy="#{reciboDiaria.diaria.valorDiaria}">
								<h:outputText value="#{reciboDiaria.diaria.valorDiaria}" />
							</p:column>
							<p:column rendered="#{reciboDiaria.dados != null}" width="10%"
								filterMatchMode="contains" headerText="Valor da Diária"
								filterBy="#{reciboDiaria.dados.valorDiaria}"
								sortBy="#{reciboDiaria.dados.valorDiaria}">
								<h:outputText value="#{reciboDiaria.dados.valorDiaria}">
									<f:convertNumber currencySymbol="R$" maxFractionDigits="2"
										type="currency" />
								</h:outputText>
							</p:column>

						</p:dataTable>

					</p:outputPanel>
				</p:scrollPanel>
			</p:outputPanel>

			<p:panelGrid columns="4" layout="grid"
				styleClass="ui-panelgrid-blank form-group ui-fluid removeSideGridPadding">
				<p:commandButton styleClass="NavyButton"
					update=":lume:imprimirReciboReciboPnl" value="Visualizar impressao"
					icon="fa fa-printer"
					oncomplete="PF('dlgImprimirReciboRepasse').show()" process="@this" />
				<p:column />
				<p:column />
				<p:commandButton styleClass="NavyButton" value="Fechar"
					process="@this" oncomplete="PF('dlgVisualizarRecibo').hide()" />
			</p:panelGrid>
		</p:dialog>

		<p:dialog id="dlgCalculoRepasse" widgetVar="dlgCalculoRepasse"
			header="Cálculo de Repasse" responsive="true" modal="true"
			width="60%" styleClass="dlgCalculoRepasse">
			<p:panel id="pnCalculoRepasse"
				style="max-height: 80vh; overflow-y: auto; overflow-x: none;">
				<p:scrollPanel mode="native"
					style="position: relative; width: 100%; height: 100%; border: none;">
					<p:repeat
						value="#{repasseProfissionalComReciboMB.lancamentosCalculados}"
						var="lancamentoCalculado">
						<p:outputPanel
							rendered="#{lancamentoCalculado.dadosTabelaMetodoRepasse == 'POR'}"
							style="width: 70%; position: relative; left: 50%; transform: translateX(-50%); padding-top: 10px; padding-bottom: 10px; border: solid 1px gray;"
							styleClass="dlgCalculoRepassePnl">
							<div style="padding: 10px;">
								<div style="width: 100%; padding: 5px; text-align: center">
									(<b>Valor Recebido</b> - <b>Taxas/Tarifas</b> - <b>Tributos</b>
									- <b>Custos Diretos</b>) * <b>Perc. Repasse</b>
								</div>
								<p:separator styleClass="SeparatorFull" />
								<p:dataTable value="#{repasseProfissionalComReciboMB.oneValue}">
									<p:column>
										<table style="width: 100%" class="traceRepasse">
											<tr>
												<th colspan="8">Procedimento</th>
												<th colspan="4">Valor</th>
											</tr>
											<tr>
												<td colspan="8"><h:outputText
														value="#{lancamentoCalculado.rfl.faturaItem.descricaoItem}" /></td>
												<td colspan="4"><h:outputText
														value="#{lancamentoCalculado.dadosCalculoPercItemFaturaStr}">
														<f:convertNumber currencySymbol="R$" maxFractionDigits="2"
															type="currency" />
													</h:outputText></td>
											</tr>
											<tr>
												<th colspan="4">Plano de Tratamento</th>
												<th colspan="4">Valor total da Fatura</th>
												<th colspan="4">Valor Recebido</th>
											</tr>
											<tr>
												<td colspan="4"><h:outputText
														value="#{lancamentoCalculado.ptp.planoTratamento.descricao}" /></td>
												<td colspan="4"><h:outputText
														value="#{lancamentoCalculado.dadosTabelaValorTotalFaturaOrigem}">
														<f:convertNumber currencySymbol="R$" maxFractionDigits="2"
															type="currency" />
													</h:outputText></td>
												<td colspan="4"><h:outputText
														value="#{lancamentoCalculado.dadosCalculoPercPagtoFaturaStr}">
														<f:convertNumber currencySymbol="R$" maxFractionDigits="2"
															type="currency" />
													</h:outputText></td>
											</tr>
											<tr>
												<th colspan="4">Deduções</th>
												<th colspan="4">Base de cálculo</th>
												<th colspan="4">Valor da dedução</th>
											</tr>
											<tr>
												<td colspan="4">Taxa</td>
												<td colspan="4"><h:outputText
														value="#{lancamentoCalculado.dadosCalculoPercTaxa}">
														<f:convertNumber maxFractionDigits="2" type="percent" />
													</h:outputText></td>
												<td colspan="4"><h:outputText
														value="#{lancamentoCalculado.dadosCalculoValorTaxa}">
														<f:convertNumber currencySymbol="R$" maxFractionDigits="2"
															type="currency" />
													</h:outputText></td>
											</tr>
											<tr>
												<td colspan="4">Tarifa</td>
												<td colspan="4"></td>
												<td colspan="4"><h:outputText
														value="#{lancamentoCalculado.dadosCalculoValorTarifa}">
														<f:convertNumber currencySymbol="R$" maxFractionDigits="2"
															type="currency" />
													</h:outputText></td>
											</tr>
											<tr>
												<td colspan="4">Tributo</td>
												<td colspan="4"><h:outputText
														value="#{lancamentoCalculado.dadosCalculoPercTributo}">
														<f:convertNumber maxFractionDigits="2" type="percent" />
													</h:outputText></td>
												<td colspan="4"><h:outputText
														value="#{lancamentoCalculado.dadosCalculoValorTributo}">
														<f:convertNumber currencySymbol="R$" maxFractionDigits="2"
															type="currency" />
													</h:outputText></td>
											</tr>
											<tr>
												<td colspan="4">Custo Direto</td>
												<td colspan="4"><h:outputText
														value="#{lancamentoCalculado.dadosCalculoInvPercItemSemCusto}">
														<f:convertNumber maxFractionDigits="2" type="percent" />
													</h:outputText></td>
												<td colspan="4"><h:outputText
														value="#{lancamentoCalculado.dadosCalculoReducaoCustoDireto}">
														<f:convertNumber currencySymbol="R$" maxFractionDigits="2"
															type="currency" />
													</h:outputText></td>
											</tr>
											<tr>
												<td colspan="8">Total:</td>
												<td colspan="4"><h:outputText
														value="#{lancamentoCalculado.dadosCalculoTotalReducao}">
														<f:convertNumber currencySymbol="R$" maxFractionDigits="2"
															type="currency" />
													</h:outputText></td>
											</tr>
											<tr>
												<ui:remove>
													Antigo usado abaixo: dadosCalculoRecebidoMenosReducao
												</ui:remove>
												<td colspan="8">Valor recebido descontando as deduções
													acima:</td>
												<td colspan="4"><h:outputText
														value="#{lancamentoCalculado.dadosCalculoValorARepassarSemCusto}">
														<f:convertNumber currencySymbol="R$" maxFractionDigits="2"
															type="currency" />
													</h:outputText></td>
											</tr>

											<ui:remove>
												<tr>
													<th colspan="1">Valor do procedimento</th>
													<th colspan="1">Valor Custos Diretos</th>
													<th colspan="1">Valor sem custos diretos</th>
													<th colspan="1">Valor total da fatura</th>
													<th colspan="2">Percentual Item/Fatura</th>
													<th colspan="2">Percentual de dedução</th>
													<th colspan="4">Valor a deduzir do pagamento</th>
												</tr>
												<tr>
													<td colspan="1"><h:outputText
															value="#{lancamentoCalculado.rfl.faturaItem.valorComDesconto}">
															<f:convertNumber currencySymbol="R$"
																maxFractionDigits="2" type="currency" />
														</h:outputText></td>
													<td colspan="1"><h:outputText
															value="#{lancamentoCalculado.dadosTabelaValorTotalCustosDiretos}">
															<f:convertNumber currencySymbol="R$"
																maxFractionDigits="2" type="currency" />
														</h:outputText></td>
													<td colspan="1"><h:outputText
															value="#{lancamentoCalculado.dadosCalculoValorItemSemCusto}">
															<f:convertNumber currencySymbol="R$"
																maxFractionDigits="2" type="currency" />
														</h:outputText></td>
													<td colspan="1"><h:outputText
															value="#{lancamentoCalculado.dadosTabelaValorTotalFaturaOrigem}">
															<f:convertNumber currencySymbol="R$"
																maxFractionDigits="2" type="currency" />
														</h:outputText></td>
													<td colspan="2"><h:outputText
															value="#{lancamentoCalculado.dadosCalculoPercItemSemCusto}">
															<f:convertNumber maxFractionDigits="2" type="percent" />
														</h:outputText></td>
													<td colspan="2"><h:outputText
															value="#{lancamentoCalculado.dadosCalculoInvPercItemSemCusto}">
															<f:convertNumber maxFractionDigits="2" type="percent" />
														</h:outputText></td>
													<td colspan="4"><h:outputText
															value="#{lancamentoCalculado.dadosCalculoReducaoCustoDireto}">
															<f:convertNumber currencySymbol="R$"
																maxFractionDigits="2" type="currency" />
														</h:outputText></td>
												</tr>
												<tr>
													<td colspan="8">Valor sem descontos e custos diretos:</td>
													<td colspan="4"><h:outputText
															value="#{lancamentoCalculado.dadosCalculoValorARepassarSemCusto}">
															<f:convertNumber currencySymbol="R$"
																maxFractionDigits="2" type="currency" />
														</h:outputText></td>
												</tr>
											</ui:remove>

											<tr>
												<th colspan="4">Profissional</th>
												<th colspan="4">Percentual de repasse</th>
												<th colspan="4">Valor do repasse</th>
											</tr>
											<tr>
												<td colspan="4"><h:outputText
														value="#{lancamentoCalculado.fatura.profissional.dadosBasico.nome}" /></td>
												<td colspan="4"><h:outputText
														value="#{lancamentoCalculado.dadosTabelaValorRepasse}" /></td>
												<td colspan="4"><h:outputText
														value="#{lancamentoCalculado.valor}">
														<f:convertNumber currencySymbol="R$" maxFractionDigits="2"
															type="currency" />
													</h:outputText></td>
											</tr>
										</table>
									</p:column>
								</p:dataTable>
							</div>
						</p:outputPanel>

						<p:outputPanel
							rendered="#{lancamentoCalculado.dadosTabelaMetodoRepasse == 'PRO'}"
							style="width: 70%; position: relative; left: 50%; transform: translateX(-50%); padding-top: 10px; padding-bottom: 10px; border: solid 1px gray;">
							<div style="padding: 10px;">
								<div style="width: 100%; padding: 5px; text-align: center">
									(<b>Valor Recebido</b> / <b>Valor total da fatura</b>) * <b>Valor
										de Repasse</b>
								</div>
								<p:separator styleClass="SeparatorFull" />
								<p:dataTable value="#{repasseProfissionalComReciboMB.oneValue}">
									<p:column>
										<table style="width: 100%" class="traceRepassePro">
											<tr>
												<th colspan="8">Procedimento</th>
												<th colspan="4">Valor</th>
											</tr>
											<tr>
												<td colspan="8"><h:outputText
														value="#{lancamentoCalculado.rfl.faturaItem.descricaoItem}" /></td>
												<td colspan="4"><h:outputText
														value="#{lancamentoCalculado.dadosCalculoPercItemFaturaStr}">
														<f:convertNumber currencySymbol="R$" maxFractionDigits="2"
															type="currency" />
													</h:outputText></td>
											</tr>
											<tr>
												<th colspan="4">Plano de Tratamento</th>
												<th colspan="4">Valor total da Fatura</th>
												<th colspan="4">Valor Recebido</th>
											</tr>
											<tr>
												<td colspan="4"><h:outputText
														value="#{lancamentoCalculado.ptp.planoTratamento.descricao}" /></td>
												<td colspan="4"><h:outputText
														value="#{lancamentoCalculado.dadosTabelaValorTotalFaturaOrigem}">
														<f:convertNumber currencySymbol="R$" maxFractionDigits="2"
															type="currency" />
													</h:outputText></td>
												<td colspan="4"><h:outputText
														value="#{lancamentoCalculado.dadosCalculoPercPagtoFaturaStr}">
														<f:convertNumber currencySymbol="R$" maxFractionDigits="2"
															type="currency" />
													</h:outputText></td>
											</tr>
											<tr>
												<th colspan="4">Percentual Recebido/Total fatura</th>
												<th colspan="4">Base de cálculo do repasse</th>
												<th colspan="4">Valor do Repasse</th>
											</tr>
											<tr>
												<td colspan="4"><h:outputText
														value="#{lancamentoCalculado.dadosCalculoPercLancamentoFatura}">
														<f:convertNumber maxFractionDigits="2" type="percent" />
													</h:outputText></td>
												<td colspan="4"><h:outputText
														value="#{lancamentoCalculado.dadosTabelaValorRepasse}">
														<f:convertNumber currencySymbol="R$" maxFractionDigits="2"
															type="currency" />
													</h:outputText></td>
												<td colspan="4"><h:outputText
														value="#{lancamentoCalculado.valor}">
														<f:convertNumber currencySymbol="R$" maxFractionDigits="2"
															type="currency" />
													</h:outputText></td>
											</tr>
										</table>
									</p:column>
								</p:dataTable>
							</div>
						</p:outputPanel>
					</p:repeat>

				</p:scrollPanel>
			</p:panel>
		</p:dialog>
		<p:dialog appendTo=":lume" closable="false" widgetVar="dlgGerarRecibo"
			header="Gerar recibo de pagamento" modal="true" width="70%">
			<p:ajax event="close"
				listener="#{repasseProfissionalComReciboMB.cancelarRecibo}" />
			<p:outputPanel id="gerarReciboPnl">
				<p:panelGrid columns="1" layout="grid"
					styleClass="ui-panelgrid-blank form-group ui-fluid removeSideGridPadding moreSpace">
					<h:outputText
						rendered="#{repasseProfissionalComReciboMB.lancamentoParaRecibo != null and !repasseProfissionalComReciboMB.lancamentoParaRecibo.isEmpty()}"
						value="Será gerado um recibo para cada profissional destinatário dos lançamentos, agrupando-os em um único recibo."
						escape="false" />
					<h:outputText
						rendered="#{repasseProfissionalComReciboMB.diariaParaRecibo != null and !repasseProfissionalComReciboMB.diariaParaRecibo.isEmpty()}"
						value="Será gerado um recibo para cada profissional destinatário das diárias, agrupando-os em um único recibo."
						escape="false" />
				</p:panelGrid>
				<p:dataTable
					value="#{repasseProfissionalComReciboMB.profissionaisRecibo}"
					var="profissional" filterDelay="1000" reflow="true"
					emptyMessage="Nenhum lançamento válido para gerar recibo"
					id="dtProfissionaisRecibo" rows="15" paginator="true"
					paginatorPosition="bottom" rowKey="#{profissional}">
					<f:facet name="header">Profissionais e Repasses</f:facet>
					<p:column filterMatchMode="contains" headerText="Profissional"
						sortBy="#{profissional.dadosBasico.nome}"
						filterBy="#{profissional.dadosBasico.nome}">
						<h:outputText value="#{profissional.dadosBasico.nome}" />
					</p:column>
					<p:column filterMatchMode="contains" headerText="Qtde. Lançamentos"
						rendered="#{repasseProfissionalComReciboMB.lancamentoParaRecibo != null and !repasseProfissionalComReciboMB.lancamentoParaRecibo.isEmpty()}"
						sortBy="#{repasseProfissionalComReciboMB.getQtdeLancamentosFromProfissional(profissional)}"
						filterBy="#{repasseProfissionalComReciboMB.getQtdeLancamentosFromProfissional(profissional)}">
						<h:outputText
							value="#{repasseProfissionalComReciboMB.getQtdeLancamentosFromProfissional(profissional)}" />
					</p:column>
					<p:column filterMatchMode="contains" headerText="Qtde. Diárias"
						rendered="#{repasseProfissionalComReciboMB.diariaParaRecibo != null and !repasseProfissionalComReciboMB.diariaParaRecibo.isEmpty()}"
						sortBy="#{repasseProfissionalComReciboMB.getQtdeLancamentosFromProfissional(profissional)}"
						filterBy="#{repasseProfissionalComReciboMB.getQtdeLancamentosFromProfissional(profissional)}">
						<h:outputText
							value="#{repasseProfissionalComReciboMB.getQtdeLancamentosFromProfissional(profissional)}" />
					</p:column>
					<p:column filterMatchMode="contains"
						headerText="Valor total para repasse"
						sortBy="#{repasseProfissionalComReciboMB.getValorLancamentosFromProfissional(profissional)}"
						filterBy="#{repasseProfissionalComReciboMB.getValorLancamentosFromProfissional(profissional)}">
						<h:outputText
							value="#{repasseProfissionalComReciboMB.getValorLancamentosFromProfissional(profissional)}">
							<f:convertNumber type="currency" currencySymbol="R$"
								maxFractionDigits="2" />
						</h:outputText>
					</p:column>
				</p:dataTable>
				<br />
				<p:panelGrid columns="1" layout="grid" id="detalhesNovoRecibo"
					styleClass="ui-panelgrid-blank form-group ui-fluid removeSideGridPadding moreSpace">
					<h:panelGroup styleClass="md-inputfield">
						<p:inputText value="#{repasseProfissionalComReciboMB.descricao}"
							id="descricaoRecibo" maxlength="255" />
						<p:outputLabel for="descricaoRecibo" value="Descrição" />
					</h:panelGroup>
					<h:panelGroup styleClass="md-inputfield">
						<p:inputTextarea style="width: 100%" rows="6"
							value="#{repasseProfissionalComReciboMB.observacao}"
							id="observacaoRecibo" />
						<p:outputLabel for="observacaoRecibo" value="Observação" />
					</h:panelGroup>
				</p:panelGrid>
				<p:separator styleClass="SeparatorFull" />
				<p:panelGrid columns="2" layout="grid"
					styleClass="ui-panelgrid-blank form-group ui-fluid removeSideGridPadding moreSpace">
					<p:commandButton styleClass="GreenButton" value="Gerar Recibo"
						update="detalhesNovoRecibo,:lume:tabViewRepasseProfissional:dtPrincipalRepasse,:lume:tabViewRepasseProfissional:dtPrincipalRepasseDiaria"
						process="@this,detalhesNovoRecibo"
						oncomplete="PF('dtPrincipalRepasseDiaria').filter();"
						actionListener="#{repasseProfissionalComReciboMB.gerarRecibo}" />
					<p:commandButton styleClass="NavyButton" value="Fechar"
						process="@this" onclick="PF('dlgGerarRecibo').hide()" />
				</p:panelGrid>
			</p:outputPanel>
		</p:dialog>

		<div class="ui-g ui-fluid">
			<div class="ui-g-12 ui-lg-12">
				<div class="card card-w-title">
					<p:tabView id="tabViewRepasseProfissional">
						<p:tab title="Repasse por Procedimento ou Porcentagem">
							<div class="ui-g ui-fluid">
								<div class="ui-g-12 ui-lg-12">
									<div class="card card-w-title">


										<p:panelGrid columns="2" layout="grid"
											columnClasses="ui-grid-col-10,ui-grid-col-2"
											styleClass="ui-panelgrid-blank ui-fluid form-group">
											<h:panelGroup>
												<h1>Repasse dos Profissionais</h1>
											</h:panelGroup>
											<h:panelGroup>
												<p:commandButton value="Videos tutoriais"
													icon="White fa fa-youtube-play White"
													actionListener="#{repasseProfissionalComReciboMB.setVideos()}"
													oncomplete="PF('dlgListaVideos').show()"
													process="@this,painelVideoList" update="painelVideoList" />
											</h:panelGroup>
										</p:panelGrid>
										<p:fieldset legend="Filtros">
											<p:outputPanel id="filtros">
												<p:panelGrid columns="3" layout="grid"
													styleClass="ui-panelgrid-blank ui-fluid form-group removeSecondPadding"
													style="border:0px none; background-color:transparent;">
													<h:panelGroup styleClass="md-combo" style="margin-top:8px">
														<p:selectOneMenu id="filtroPeriodoRepasses"
															value="#{repasseProfissionalComReciboMB.filtroPeriodo}">
															<f:selectItem itemValue="" itemLabel="Selecione" />
															<f:selectItem itemValue="O" itemLabel="Ontem" />
															<f:selectItem itemValue="H" itemLabel="Hoje" />
															<f:selectItem itemValue="MA" itemLabel="Mês Anterior" />
															<f:selectItem itemValue="M" itemLabel="Mês Atual" />
															<f:selectItem itemValue="S" itemLabel="Últimos 7 dias" />
															<f:selectItem itemValue="Q" itemLabel="Últimos 15 dias" />
															<f:selectItem itemValue="T" itemLabel="Últimos 30 dias" />
															<f:selectItem itemValue="I" itemLabel="Últimos 6 meses" />
															<p:ajax process="@this" update="dataInicio dataFim"
																listener="#{repasseProfissionalComReciboMB.actionTrocaDatas}" />
														</p:selectOneMenu>
														<p:outputLabel for="filtroPeriodoRepasses"
															value="Período de execução dos procedimentos:" />
													</h:panelGroup>
													<h:panelGroup>
														<p:outputLabel for="dataInicio"
															value="Data Inicial da execução os Procedimentos:" />
														<p:calendar id="dataInicio"
															value="#{repasseProfissionalComReciboMB.dataInicio}"
															autocomplete="false" />
													</h:panelGroup>

													<h:panelGroup>
														<p:outputLabel for="dataFim"
															value="Data Final da execução os Procedimentos:" />
														<p:calendar id="dataFim"
															value="#{repasseProfissionalComReciboMB.dataFim}"
															autocomplete="false" />
													</h:panelGroup>
												</p:panelGrid>
												<p:panelGrid columns="3" layout="grid"
													styleClass="ui-panelgrid-blank ui-fluid form-group removeSecondPadding"
													style="border:0px none; background-color:transparent;">
													<h:panelGroup>
														<p:outputLabel for="fitroProfissional"
															value="Profissional:" />
														<p:autoComplete dropdown="true" queryDelay="1000"
															size="35"
															value="#{repasseProfissionalComReciboMB.profissional}"
															id="fitroProfissional" minQueryLength="3"
															completeMethod="#{repasseProfissionalComReciboMB.geraSugestoesProfissional}"
															var="profissional"
															itemLabel="#{profissional.dadosBasico.prefixoNome}"
															itemValue="#{profissional}" converter="profissional"
															forceSelection="true">
														</p:autoComplete>
													</h:panelGroup>
												</p:panelGrid>
												<p:panelGrid columns="4" layout="grid" id="pnFiltroStatus"
													columnClasses="ui-g-1,ui-g-5,ui-g-1,ui-g-5"
													styleClass="ui-panelgrid-blank ui-fluid form-group removeSecondPadding pnFiltroStatus"
													style="border:0px none; background-color:transparent;">

													<p:selectBooleanCheckbox id="semPendencias"
														value="#{repasseProfissionalComReciboMB.semPendencias}">
														<p:ajax process="@this,pnFiltroStatus"
															listener="#{repasseProfissionalComReciboMB.mudaCheckbox('semPendencias')}"
															update="pnFiltroStatus" />
													</p:selectBooleanCheckbox>
													<p:outputLabel for="semPendencias"
														value="Buscar somente disponíveis para repasse " />
													<p:selectBooleanCheckbox id="procedimentosNaoExecutados"
														value="#{repasseProfissionalComReciboMB.procedimentosNaoExecutados}">
														<p:ajax process="@this,pnFiltroStatus"
															listener="#{repasseProfissionalComReciboMB.mudaCheckbox('procedimentosNaoExecutados')}"
															update="pnFiltroStatus" />
													</p:selectBooleanCheckbox>
													<p:outputLabel for="procedimentosNaoExecutados"
														value="Mostrar procedimentos com executor ainda não executados (ignora data) " />

													<p:selectBooleanCheckbox id="mostrarRepasseAntigo"
														value="#{repasseProfissionalComReciboMB.mostrarRepasseAntigo}">
														<p:ajax process="@this,pnFiltroStatus"
															listener="#{repasseProfissionalComReciboMB.mudaCheckbox('mostrarRepasseAntigo')}"
															update="pnFiltroStatus" />
													</p:selectBooleanCheckbox>
													<p:outputLabel for="mostrarRepasseAntigo"
														value="Mostrar somente repasses antigos" />

												</p:panelGrid>
												<p:panelGrid columns="3" layout="grid"
													styleClass="ui-panelgrid-blank form-group ui-fluid">

													<p:commandButton id="pesquisarNovoRepasse"
														icon="White fa fa-search" value="Pesquisar"
														styleClass="OrangeButton"
														actionListener="#{repasseProfissionalComReciboMB.pesquisar}"
														process="@this, :lume:tabViewRepasseProfissional:filtros"
														update=":lume:tabViewRepasseProfissional:dtPrincipalRepasse"
														oncomplete="PF('dtPrincipalRepasse').filter();" />

													<h:panelGroup>

														<p:splitButton icon="White fa fa fa-file-excel-o"
															value="Exportar tabela para Excel"
															styleClass="GreenSplitButton" process="@this"
															update="@this">

															<p:dataExporter type="xls"
																target=":lume:tabViewRepasseProfissional:dtPrincipalRepasse"
																fileName="Procedimentos" encoding="ISO-8859-1" />

															<p:menuitem value="Exportar tabela para PDF"
																icon="fa fa fa-file-pdf-o" process="@this">
																<p:dataExporter type="pdf"
																	target=":lume:tabViewRepasseProfissional:dtPrincipalRepasse"
																	fileName="Procedimentos" encoding="ISO-8859-1" />
															</p:menuitem>
															<p:menuitem value="Exportar tabela para CSV"
																icon="fa fa fa-file-pdf-o" process="@this">
																<p:dataExporter type="csv"
																	target=":lume:tabViewRepasseProfissional:dtPrincipalRepasse"
																	fileName="Procedimentos" encoding="ISO-8859-1" />
															</p:menuitem>
														</p:splitButton>
													</h:panelGroup>
												</p:panelGrid>
											</p:outputPanel>

											<p:panelGrid columns="4" layout="grid"
												styleClass="ui-panelgrid-blank form-group ui-fluid removeSideGridPadding moreSpace">
												<p:commandButton
													value="Gerar Recibo dos Repasses Selecionados"
													process="@this, :lume:tabViewRepasseProfissional:dtPrincipalRepasse"
													actionListener="#{repasseProfissionalComReciboMB.prepararRecibo}"
													update=":lume:gerarReciboPnl" />
											</p:panelGrid>

											<p:dataTable filterDelay="1500" reflow="true" emptyMessage=""
												id="dtPrincipalRepasse"
												value="#{repasseProfissionalComReciboMB.entityList}"
												var="ptp" paginator="false" rowKey="#{ptp}"
												paginatorPosition="bottom" widgetVar="dtPrincipalRepasse"
												binding="#{repasseProfissionalComReciboMB.tabelaRepasse}"
												selection="#{repasseProfissionalComReciboMB.ptpsSelecionados}">
												<f:facet name="header">Procedimentos</f:facet>
												<p:column selectionMode="multiple" style="width:16px;" />
												<p:column width="12%" headerText="Ações" exportable="false">

													<p:commandButton icon="fa fa-eye" styleClass="NavyButton"
														title="Detalhes do repasse"
														process="@this"
														oncomplete="PF('dlgFaturaView').show();"
														disabled="#{ptp.fatura eq null  or 
													ptp.fatura.ativo eq 'N' }">
														<p:ajax process="@this"
															listener="#{faturaPagtoMB.visualizaFatura(ptp.fatura)}"
															oncomplete="PF('dlgFaturaViewProfissional').show();"
															update=":lume:pnlfaturaViewProf, :lume:pnlfaturaViewProfHeader, :lume:buttonViewFaturaProf" />
													</p:commandButton>
													<p:commandButton icon="fa fa-calculator"
														styleClass="NavyButton" title="Visualizar Cálculo Repasse"
														actionListener="#{repasseProfissionalComReciboMB.mostraCalculoRepasse(ptp)}"
														process="@this"
														disabled="#{ptp.fatura eq null  or 
													ptp.fatura.ativo eq 'N' }"
														update=":lume:pnCalculoRepasse" />

													<p:commandButton icon="fa fa-repeat"
														styleClass="NavyButton" title="Recalcular Repasse"
														rendered="#{repasseProfissionalComReciboMB.admin}"
														actionListener="#{repasseProfissionalComReciboMB.recalcularRepasse(ptp)}"
														process="@this,dtPrincipalRepasse"
														oncomplete="PF('dtPrincipalRepasse').filter();"
														update=":lume:tabViewRepasseProfissional:dtPrincipalRepasse,:lume:pnCalculoRepasse">
														<p:confirm header="Confirmação" icon="ui-icon-alert"
															escape="false"
															message="Cofirma o recálculo de repasse de profissional?">
														</p:confirm>
													</p:commandButton>

													<p:commandButton icon="fa fa-dollar"
														styleClass="NavyButton" title="Ajuste Manual"
														rendered="#{repasseProfissionalComReciboMB.admin}"
														actionListener="#{repasseProfissionalComReciboMB.mostraAjusteManual(ptp)}"
														process="@this"
														oncomplete="PF('dtPrincipalRepasse').filter();"
														update=":lume:pnAjuste,:lume:painelJustificativa">
													</p:commandButton>



												</p:column>
												<p:column
													filterBy="#{ptp.dentistaExecutor.dadosBasico.prefixoNome}"
													sortBy="#{ptp.dentistaExecutor.dadosBasico.prefixoNome}"
													filterMatchMode="contains"
													filterFunction="#{repasseProfissionalComReciboMB.filtroSemAcento}">
													<f:facet name="header">
														<h:outputText value="Dentista Executor" />
													</f:facet>
													<h:outputText
														value="#{ptp.dentistaExecutor.dadosBasico.prefixoNome}" />
												</p:column>
												<p:column
													filterBy="#{ptp.planoTratamento.paciente.dadosBasico.nome}"
													sortBy="#{ptp.planoTratamento.paciente.dadosBasico.nome}"
													filterMatchMode="contains"
													filterFunction="#{repasseProfissionalComReciboMB.filtroSemAcento}">
													<f:facet name="header">
														<h:outputText value="Paciente" />
													</f:facet>

													<p:commandLink
														value="#{ptp.planoTratamento.paciente.dadosBasico.nome}"
														process="@this" title="#{ptp.planoTratamento.paciente.id}"
														actionListener="#{tabPacienteMB.loadPaciente(ptp.planoTratamento.paciente)}"
														oncomplete="PF('dlgFichaPaciente').show()"
														update=":lume:tabViewPaciente:pnDadosPaciente, :lume:pnPrincipalFicha, :lume:pnPrincipalFichaHeader, :lume:tabViewOutPanel, :lume:buttonsFichaPaciente">
														<f:param name="paciente_selecionado"
															value="#{ptp.planoTratamento.paciente.id}"></f:param>
													</p:commandLink>

												</p:column>
												<p:column filterBy="#{ptp.planoTratamento.descricao}"
													sortBy="#{ptp.planoTratamento.descricao}"
													filterMatchMode="contains"
													filterFunction="#{repasseProfissionalComReciboMB.filtroSemAcento}">
													<f:facet name="header">
														<h:outputText value="Plano de tratamento" />
													</f:facet>
													<h:outputText title="#{ptp.id}"
														value="#{ptp.planoTratamento.descricao}" />
												</p:column>
												<p:column filterBy="#{ptp.descricaoCompletaComFace}"
													sortBy="#{ptp.descricaoCompletaComFace}"
													filterMatchMode="contains"
													filterFunction="#{repasseProfissionalComReciboMB.filtroSemAcento}">
													<f:facet name="header">
														<h:outputText value="Procedimento" />
													</f:facet>
													<h:outputText value="#{ptp.descricaoCompletaComFace}" />
												</p:column>
												<p:column filterBy="#{ptp.dataFinalizadoStr}"
													headerText="Data de Execução" filterMatchMode="contains"
													sortBy="#{ptp.dataFinalizado}">
													<h:outputText value="#{ptp.dataFinalizadoStr}" />
												</p:column>

												<p:column filterBy="#{ptp.valorTotal}"
													headerText="Valor total de repasse"
													filterMatchMode="contains" sortBy="#{ptp.valorTotal}">
													<p:commandLink process="@this"
														title="verificar custos diretos"
														actionListener="#{pTPCustoDiretoMB.abreDialog(ptp)}"
														update=":lume:pnPTPCustoDireto, :lume:pnPTPCustoDiretoHeader,:lume:buttonsPTPCustoDireto">
														<h:outputText value="#{ptp.valorTotal}">
															<f:convertNumber currencySymbol="R$ " type="currency" />
														</h:outputText>
													</p:commandLink>
												</p:column>

												<p:column filterBy="#{ptp.valorPago}"
													headerText="Valor repassado" filterMatchMode="contains"
													sortBy="#{ptp.valorPago}">
													<h:outputText value="#{ptp.valorPago}">
														<f:convertNumber currencySymbol="R$ " type="currency" />
													</h:outputText>
												</p:column>

												<p:column filterBy="#{ptp.valorDisponivel}"
													headerText="Valor disponível para repasse"
													filterMatchMode="contains" sortBy="#{ptp.valorDisponivel}">
													<p:commandLink process="@this" title="verificar pendências"
														actionListener="#{repasseProfissionalComReciboMB.verificaPendencias(ptp)}"
														oncomplete="PF('dlgPendencias').show()"
														update=":lume:dlgPendencias">
														<h:outputText value="#{ptp.valorDisponivel}"
															style="color: #{ repasseProfissionalComReciboMB.existemPendencias(ptp) ?'red':'none'}">
															<f:convertNumber currencySymbol="R$ " type="currency" />
														</h:outputText>
													</p:commandLink>
												</p:column>
											</p:dataTable>
										</p:fieldset>
									</div>
								</div>
							</div>
						</p:tab>




						<p:tab title="Repasse por Diária">
							<div class="ui-g ui-fluid">
								<div class="ui-g-12 ui-lg-12">
									<div class="card card-w-title">
										<h1>Repasse dos Profissionais por Diária</h1>
										<p:fieldset legend="Filtros">
											<p:outputPanel id="filtrosDiaria">
												<p:panelGrid columns="3" layout="grid"
													styleClass="ui-panelgrid-blank ui-fluid form-group removeSecondPadding"
													style="border:0px none; background-color:transparent;">
													<h:panelGroup styleClass="md-combo" style="margin-top:8px">
														<p:selectOneMenu id="filtroPeriodoRepassesDiaria"
															value="#{repasseProfissionalComReciboMB.filtroPeriodoDiaria}"
															converter="enumPeriodoBusca">
															<f:selectItems value="#{padroesTelaMB.periodosDataBusca}"
																var="periodo" itemValue="#{periodo}"
																itemLabel="#{periodo.descricao}" />
															<p:ajax process="@this"
																update="dataInicioDiaria dataFimDiaria"
																listener="#{repasseProfissionalComReciboMB.actionTrocaDatasDiaria}" />
														</p:selectOneMenu>
														<p:outputLabel for="filtroPeriodoRepassesDiaria"
															value="Período de Marcação do Ponto:" />
													</h:panelGroup>
													<h:panelGroup>
														<p:outputLabel for="dataInicioDiaria"
															value="Data Inicial do Ponto:" />
														<p:calendar id="dataInicioDiaria"
															value="#{repasseProfissionalComReciboMB.dataInicioDiaria}"
															autocomplete="false" />
													</h:panelGroup>

													<h:panelGroup>
														<p:outputLabel for="dataFimDiaria"
															value="Data Final do Ponto:" />
														<p:calendar id="dataFimDiaria"
															value="#{repasseProfissionalComReciboMB.dataFimDiaria}"
															autocomplete="false" />
													</h:panelGroup>
												</p:panelGrid>
												<p:panelGrid columns="3" layout="grid"
													styleClass="ui-panelgrid-blank ui-fluid form-group removeSecondPadding"
													style="border:0px none; background-color:transparent;">
													<h:panelGroup>
														<p:outputLabel for="fitroProfissionalDiaria"
															value="Profissional:" />
														<p:autoComplete dropdown="true" queryDelay="1000"
															size="35"
															value="#{repasseProfissionalComReciboMB.profissionalDiaria}"
															id="fitroProfissionalDiaria" minQueryLength="3"
															completeMethod="#{repasseProfissionalComReciboMB.geraSugestoesProfissionalDiaria}"
															var="profissional"
															itemLabel="#{profissional.dadosBasico.prefixoNome}"
															itemValue="#{profissional}" converter="profissional"
															forceSelection="true">
														</p:autoComplete>
													</h:panelGroup>
												</p:panelGrid>

												<p:panelGrid columns="3" layout="grid"
													styleClass="ui-panelgrid-blank form-group ui-fluid">

													<p:commandButton id="pesquisarRepasseDiaria"
														icon="White fa fa-search" value="Pesquisar"
														styleClass="OrangeButton"
														actionListener="#{repasseProfissionalComReciboMB.pesquisarDiaria}"
														process="@this, :lume:tabViewRepasseProfissional:filtrosDiaria"
														update=":lume:tabViewRepasseProfissional:dtPrincipalRepasseDiaria"
														oncomplete="PF('dtPrincipalRepasseDiaria').filter();" />

													<h:panelGroup>


														<p:splitButton icon="White fa fa fa-file-excel-o"
															value="Exportar tabela para Excel"
															styleClass="GreenSplitButton" process="@this"
															update="@this">

															<p:dataExporter type="xls"
																target="dtPrincipalRepasseDiaria" fileName="Diárias"
																encoding="ISO-8859-1" />

															<p:menuitem value="Exportar tabela para PDF"
																icon="fa fa fa-file-pdf-o" process="@this">
																<p:dataExporter type="pdf"
																	target="dtPrincipalRepasseDiaria" fileName="Diárias"
																	encoding="ISO-8859-1" />
															</p:menuitem>
															<p:menuitem value="Exportar tabela para CSV"
																icon="fa fa fa-file-pdf-o" process="@this">
																<p:dataExporter type="csv"
																	target="dtPrincipalRepasseDiaria" fileName="Diárias"
																	encoding="ISO-8859-1" />
															</p:menuitem>
														</p:splitButton>
													</h:panelGroup>
												</p:panelGrid>
											</p:outputPanel>

											<p:panelGrid columns="4" layout="grid"
												styleClass="ui-panelgrid-blank form-group ui-fluid removeSideGridPadding moreSpace">
												<p:commandButton
													value="Gerar Recibo das Diárias Selecionados"
													process="@this, :lume:tabViewRepasseProfissional:dtPrincipalRepasseDiaria"
													actionListener="#{repasseProfissionalComReciboMB.prepararReciboDiaria}"
													update=":lume:gerarReciboPnl" />
											</p:panelGrid>

											<p:dataTable filterDelay="1500" reflow="true" emptyMessage=""
												id="dtPrincipalRepasseDiaria"
												value="#{repasseProfissionalComReciboMB.diarias}"
												var="diaria" paginator="false" rowKey="#{diaria}"
												paginatorPosition="bottom"
												widgetVar="dtPrincipalRepasseDiaria"
												binding="#{repasseProfissionalComReciboMB.tabelaRepasseDiaria}"
												selection="#{repasseProfissionalComReciboMB.diariasSelecionadas}">
												<f:facet name="header">Diárias</f:facet>
												<p:column selectionMode="multiple" style="width:16px;"
													exportable="false" />
												<p:column width="80" headerText="Ações" exportable="false">
													<p:commandButton icon="fa fa-eye" process="@this"
														title="Editar Diária"
														update=":lume:viewMarcacaoPonto, :lume:pnlPonto, :lume:pnlPontoHeader"
														actionListener="#{marcacaoPontoMB.carregaDiaria(diaria)}"
														styleClass="NavyButton"
														oncomplete="PF('dlgMarcacaoPonto').show();" />
												</p:column>
												<p:column width="15%"
													filterBy="#{diaria.profissional.dadosBasico.prefixoNome}"
													sortBy="#{diaria.profissional.dadosBasico.prefixoNome}"
													filterMatchMode="contains" headerText="Dentista Executor"
													filterFunction="#{repasseProfissionalComReciboMB.filtroSemAcento}">
													<h:outputText
														value="#{diaria.profissional.dadosBasico.prefixoNome}" />
												</p:column>
												<p:column filterBy="#{diaria.allPTPsDiaria}"
													sortBy="#{diaria.allPTPsDiaria}" filterMatchMode="contains"
													headerText="Procedimentos executados no dia"
													filterFunction="#{repasseProfissionalComReciboMB.filtroSemAcento}">
													<h:outputText value="#{diaria.allPTPsDiaria}" />
												</p:column>
												<p:column filterBy="#{diaria.dataPontoStr}" width="120"
													headerText="Data do Ponto" filterMatchMode="contains"
													sortBy="#{diaria.dataPontoStr}">
													<h:outputText value="#{diaria.dataPontoStr}" />
												</p:column>
												<p:column filterBy="#{diaria.tipoPonto.descricao}"
													width="120" headerText="Tipo da Diária"
													filterMatchMode="contains"
													sortBy="#{diaria.tipoPonto.descricao}">
													<h:outputText value="#{diaria.tipoPonto.descricao}" />
												</p:column>
												<p:column filterBy="#{diaria.valorDiaria}" width="120"
													headerText="Valor Diária" filterMatchMode="contains"
													sortBy="#{diaria.valorDiaria}">
													<h:outputText value="#{diaria.valorDiaria}">
														<f:convertNumber currencySymbol="R$ " type="currency" />
													</h:outputText>
												</p:column>

											</p:dataTable>
										</p:fieldset>
									</div>
								</div>
							</div>
						</p:tab>




						<p:tab title="Recibos Emitidos" id="tabRecibosEmitidos">
							<p:fieldset legend="Filtros">
								<p:panelGrid columns="3" layout="grid"
									styleClass="ui-panelgrid-blank form-group ui-fluid removeSideGridPadding moreSpace">

									<h:panelGroup styleClass="md-combo">
										<p:selectOneMenu id="filtroPeriodoRecibos"
											value="#{reciboRepasseProfissionalMB.filtroPeriodoRecibos}">

											<f:selectItem itemValue="" itemLabel="Selecione" />
											<f:selectItem itemValue="O" itemLabel="Ontem" />
											<f:selectItem itemValue="H" itemLabel="Hoje" />
											<f:selectItem itemValue="M" itemLabel="Mês Atual" />
											<f:selectItem itemValue="S" itemLabel="Últimos 7 dias" />
											<f:selectItem itemValue="Q" itemLabel="Últimos 15 dias" />
											<f:selectItem itemValue="T" itemLabel="Últimos 30 dias" />
											<f:selectItem itemValue="I" itemLabel="Últimos 6 meses" />

											<p:ajax process="@this"
												update="dataInicialRecibos, dataFinalRecibos"
												listener="#{reciboRepasseProfissionalMB.actionTrocaDatasCriacaoRecibos}" />
										</p:selectOneMenu>
										<p:outputLabel for="filtroPeriodoRecibos"
											value="Período de criação:" />
									</h:panelGroup>

									<h:panelGroup styleClass="md-inputfield taller">
										<p:calendar id="dataInicialRecibos"
											value="#{reciboRepasseProfissionalMB.dataInicioRecibos}" />
										<p:outputLabel for="dataInicialRecibos"
											value="Data de criação de:" />
									</h:panelGroup>

									<h:panelGroup styleClass="md-inputfield taller">
										<p:calendar id="dataFinalRecibos"
											value="#{reciboRepasseProfissionalMB.dataFimRecibos}" />
										<p:outputLabel for="dataFinalRecibos"
											value="Data de criação até:" />
									</h:panelGroup>

									<h:panelGroup styleClass="md-inputfield taller">
										<p:autoComplete dropdown="true" queryDelay="1000" size="35"
											value="#{reciboRepasseProfissionalMB.profissionalRecibos}"
											id="fitroProfissionalRecibos" minQueryLength="3"
											completeMethod="#{reciboRepasseProfissionalMB.geraSugestoesProfissional}"
											var="profissional"
											itemLabel="#{profissional.dadosBasico.prefixoNome}"
											itemValue="#{profissional}" converter="profissional"
											forceSelection="true">
											<p:ajax event="itemSelect" process="@this" />
										</p:autoComplete>
										<p:outputLabel for="fitroProfissionalRecibos"
											value="Profissional" />
									</h:panelGroup>

									<h:panelGroup styleClass="md-combo">
										<p:selectOneMenu id="filtroStatusRecibos"
											value="#{reciboRepasseProfissionalMB.filtroStatus}">
											<f:selectItems
												value="#{reciboRepasseProfissionalMB.statusRecibo}"
												var="status" itemValue="#{status}"
												itemLabel="#{status.rotulo}" />
										</p:selectOneMenu>
										<p:outputLabel for="filtroStatusRecibos"
											value="Buscar somente lançamentos validados" />
									</h:panelGroup>

									<h:panelGroup>
										<p:selectBooleanCheckbox id="recibosFindCancelados"
											value="#{reciboRepasseProfissionalMB.recibosFindCancelados}" />
										<p:outputLabel for="recibosFindCancelados"
											style="margin-left: 10px;" value="Buscar recibos cancelados" />
									</h:panelGroup>

									<p:commandButton value="Pesquisar" process="@this, @parent"
										update="dtRecibos"
										actionListener="#{reciboRepasseProfissionalMB.pesquisarRecibos}" />

								</p:panelGrid>
							</p:fieldset>
							<br />
							<p:dataTable value="#{reciboRepasseProfissionalMB.entityList}"
								var="recibo" filterDelay="1000" reflow="true"
								widgetVar="dtRecibos" emptyMessage="Nenhum recibo encontrado"
								id="dtRecibos" rows="15" paginator="true"
								paginatorPosition="bottom" rowKey="#{recibo}"
								selection="#{reciboRepasseProfissionalMB.entity}"
								binding="#{reciboRepasseProfissionalMB.tabelaRecibos}">
								<f:facet name="header">
									<h:outputText value="Recibos de Repasses" />
								</f:facet>
								<p:column headerText="Ações" width="10%">
									<p:commandButton title="Visualizar Recibo"
										styleClass="NavyButton" icon="fa fa-eye" process="@this"
										update=":lume:visualizarReciboPnl, :lume:dtReciboRepasseLancamentos"
										action="#{reciboRepasseProfissionalMB.preparaVisualizacao(recibo)}" />
									<p:commandButton title="Pagar" styleClass="GreenButton"
										icon="fa fa-check"
										oncomplete="PF('dlgConfirmarPagamanto').show();"
										actionListener="#{reciboRepasseProfissionalMB.preparaAprovarRecibo(recibo)}"
										process="@this"
										update=":lume:tabViewRepasseProfissional:pnConfirmarPagamento, dtRecibos"
										disabled="#{!recibo.ativo || recibo.aprovado == 'S'}">
									</p:commandButton>
									<p:commandButton title="Cancelar Recibo" styleClass="RedButton"
										icon="fa fa-trash"
										actionListener="#{reciboRepasseProfissionalMB.cancelarRecibo(recibo)}"
										process="@this,lume:tabViewRepasseProfissional:pnConfirmarPagamento"
										update="dtRecibos,lume:tabViewRepasseProfissional:pnConfirmarPagamento"
										disabled="#{!recibo.ativo || recibo.aprovado == 'S'}">
										<p:confirm header="Confirmação" icon="ui-icon-alert"
											escape="false"
											message="Você tem certeza que deseja cancelar este recibo? &lt;br/&gt; Os lançamentos &lt;b&gt;já validados&lt;/b&gt; permanecerão validados. &lt;br/&gt; Porém todos os lançamentos deste recibo voltarão a lista de repasses elegíveis para criação de outro recibo.">
										</p:confirm>
									</p:commandButton>
								</p:column>
								<p:column headerText="Profissional" filterMatchMode="contains"
									width="15%" filterBy="#{recibo.profissional.dadosBasico.nome}"
									sortBy="#{recibo.profissional.dadosBasico.nome}">
									<h:outputText value="#{recibo.profissional.dadosBasico.nome}" />
								</p:column>
								<p:column headerText="Descrição" filterMatchMode="contains"
									width="15%" filterBy="#{recibo.descricao}"
									sortBy="#{recibo.descricao}">
									<h:outputText value="#{recibo.descricao}" />
								</p:column>
								<p:column headerText="Pago?" filterMatchMode="contains"
									width="10%" filterBy="#{recibo.aprovadoStr}"
									sortBy="#{recibo.aprovadoStr}">
									<h:outputText value="#{recibo.aprovadoStr}" />
								</p:column>
								<p:column headerText="Data de Pagamento"
									filterMatchMode="contains" width="10%"
									filterBy="#{recibo.dataPagamentoStr}"
									sortBy="#{recibo.dataPagamento}">
									<h:outputText value="#{recibo.dataPagamentoStr}" />
								</p:column>
								<p:column headerText="Qtde. Repasses/ Diárias"
									filterMatchMode="contains" width="5%"
									filterBy="#{recibo.quantidadeRepasses}"
									sortBy="#{recibo.quantidadeRepasses}">
									<h:outputText value="#{recibo.quantidadeRepasses}" />
								</p:column>
								<p:column headerText="Valor Total de Repasse" width="10%"
									filterMatchMode="contains"
									filterBy="#{recibo.valorTotalRepasse}"
									sortBy="#{recibo.valorTotalRepasse}">
									<h:outputText value="#{recibo.valorTotalRepasse}">
										<f:convertNumber type="currency" currencySymbol="R$"
											maxFractionDigits="2" />
									</h:outputText>
								</p:column>
							</p:dataTable>


							<p:dialog id="dlgConfirmarPagamanto"
								widgetVar="dlgConfirmarPagamanto" responsive="true" modal="true"
								appendTo=":lume" resizable="false" header="Confirmar Pagamento"
								width="600">

								<p:outputPanel id="pnConfirmarPagamento">
									<p:panel styleClass="BordNone">
										<p:panelGrid columns="1" layout="grid"
											styleClass="ui-panelgrid-blank form-group ui-fluid removeSideGridPadding">
											<h:outputText
												value="#{reciboRepasseProfissionalMB.getMensagemAprovacaoRecibo(reciboRepasseProfissionalMB.repasseParaAprovar)}"
												style="font-weight: bold;" />
										</p:panelGrid>
										<p:panelGrid columns="1" layout="grid"
											styleClass="ui-panelgrid-blank form-group ui-fluid removeSideGridPadding">
											<h:panelGroup>
												<p:outputLabel for="dataRepassar"
													value="Data de pagamento do Repasse:" />
												<p:calendar id="dataRepassar" required="true"
													value="#{reciboRepasseProfissionalMB.dataRepassar}"
													autocomplete="false" />
											</h:panelGroup>
										</p:panelGrid>
										<br />
										<div class="SeparatorFull"></div>
										<p:panelGrid columns="2" layout="grid"
											styleClass="ui-panelgrid-blank form-group ui-fluid">
											<p:commandButton id="persistFinalizarNovamente"
												icon="White fa fa-save" value="Salvar"
												actionListener="#{reciboRepasseProfissionalMB.aprovarRecibo}"
												update="dtRecibos" process="@this,pnConfirmarPagamento"
												oncomplete="PF('dlgConfirmarPagamanto').hide()"
												styleClass="GreenButton" />
											<p:commandButton icon="White fa fa-close" value="Fechar"
												oncomplete="PF('dlgConfirmarPagamanto').hide()"
												process="@this" styleClass="NavyButton" />
										</p:panelGrid>
										<div class="EmptyBox20"></div>
									</p:panel>
								</p:outputPanel>
							</p:dialog>

						</p:tab>

						<ui:remove>
							<p:tab title="Repasse Antigo">
								<ui:include src="faturamento.xhtml"></ui:include>
							</p:tab>
						</ui:remove>





					</p:tabView>

				</div>
			</div>
		</div>

		<script type="text/javascript">
			//<![CDATA[

			//]]>
		</script>
	</ui:define>
</ui:composition>
