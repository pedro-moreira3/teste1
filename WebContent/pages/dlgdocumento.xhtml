<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:po="http://primefaces.org/ultima"
	xmlns:ckeditor="http://ckeditor.com">

	<br />

	<style>
body .ui-selectonemenu {
	margin: 0px !important;
	padding: 0px !important;
}

ui-selectonemenu-label {
	margin: 0px !important;
	padding: 0px !important;
}

body.layout-compact .ui-selectonemenu .ui-selectonemenu-label {
	margin-top: 2.4px !important;
	padding: 0px !important;
}

body.layout-compact .ui-selectonemenu .ui-selectonemenu-trigger .ui-icon
	{
	margin-top: -12px !important;
}

.layout-paleta {
	z-index: 99;
	position: relative;
	overflow: scroll;
	overflow-x: hidden;
	height: 70%;
	background-color: #ffffff;
	-moz-transition: margin-left 0.3s;
	-o-transition: margin-left 0.3s;
	-webkit-transition: margin-left 0.3s;
	transition: margin-left 0.3s;
}

.layout-paleta .layout-menu-tooltip {
	display: none;
}
</style>

	<p:panel id="pnPrincipalDocumento">
		<p:panelGrid columns="3" layout="grid"
			styleClass="ui-panelgrid-blank ui-fluid form-group">

			<h:panelGroup>
				<p:outputLabel style="margin:0px;" for="tipoDocumento"
					value="Tipo de documento" />
				<p:selectOneMenu id="tipoDocumento" converter="dominio"
					style="min-width:0px;margin-top:10px;margin-bottom:10px;"
					value="#{documentoMB.entity.tipo}">

					<f:selectItem itemLabel="Selecione um tipo" itemValue="#{null}" />
					<f:selectItems value="#{documentoMB.listaTiposDocumentos}" var="t"
						itemLabel="#{t.nome}" itemValue="#{t}" />

					<p:ajax process="@this" listener="#{documentoMB.carregarPaleta}"
						update="paleta" />

				</p:selectOneMenu>
			</h:panelGroup>

			<h:panelGroup>
				<p:outputLabel for="descricao" value="Descrição" />
				<p:inputText id="descricao" value="#{documentoMB.entity.descricao}">
					<p:ajax process="@this" />
				</p:inputText>
			</h:panelGroup>

			<h:panelGroup>
				<p:outputLabel style="margin:0px;" for="layoutDocumento"
					value="Layout" />
				<p:selectOneMenu id="layoutDocumento"
					style="min-width:0px;margin-top:10px;margin-bottom:10px;"
					value="#{documentoMB.entity.layout}">

					<f:selectItem itemLabel="Selecione um layout" itemValue="#{null}" />
					<f:selectItem itemLabel="A3" itemValue="A3" />
					<f:selectItem itemLabel="A4" itemValue="A4" />
					<f:selectItem itemLabel="A5" itemValue="A5" />

					<p:ajax process="@this" />
				</p:selectOneMenu>
			</h:panelGroup>

			<ui:remove>
				<h:panelGroup>
					<p:selectBooleanCheckbox value="#{documentoMB.mostrarCabecalho}"
						style="min-width:0px;margin-top:10px;margin-bottom:10px;">
						<p:ajax listener="#{documentoMB.inserirCabecalho()}"
							process="@this" />
					</p:selectBooleanCheckbox>
					<p:outputLabel style="margin:0px;" for="layoutDocumento"
						value="Mostrar cabeçalho" />
				</h:panelGroup>

				<h:panelGroup>
					<p:outputLabel style="margin:0px;" for="orientacaoDocumento"
						value="Orientação" />
					<p:selectOneMenu id="orientacaoDocumento"
						style="min-width:0px;margin-top:10px;margin-bottom:10px;"
						value="#{documentoMB.entity.orientacao}">

						<f:selectItem itemLabel="Selecione a orientação"
							itemValue="#{null}" />
						<f:selectItem itemLabel="Retrato" itemValue="R" />
						<f:selectItem itemLabel="Paisagem" itemValue="P" />

						<p:ajax process="@this" />
					</p:selectOneMenu>
				</h:panelGroup>
			</ui:remove>

			<br />

		</p:panelGrid>

		<h:panelGroup
			style="display:block;vertical-align:top;margin-top:20px;text-align:center;">

			<h:panelGroup id="pnEditor"
				style="display:inline-block;vertical-align:top;width:70%;">

				<pe:ckEditor id="editor" widgetVar="editor" width="100%"
					value="#{documentoMB.documento}" escape="false" height="400px"
					toolbar="[[ 'PageBreak','Bold','Italic','Underline','Strike','RemoveFormat','NumberedList','BulletedList','Outdent','Indent','Blockquote','CreateDiv','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock','BidiLtr','BidiRtl','Table','HorizontalRule','SpecialChar','Styles','Format','Font','FontSize','TextColor','BGColor','Maximize', 'ShowBlocks' ]]"
					styleClass="BordNone" binding="#{documentoMB.ckEditor}">
					<p:ajax process="@this" />
				</pe:ckEditor>

			</h:panelGroup>

			<p:panel id="paleta"
				style="border:1px solid #bdbdbd;display:inline-block;margin-left:50px;vertical-align:top;
					width:20%;height:400px;">

				<h:form style="height:90%;">
					<div class="layout-paleta" style="height: 100%;">
						<div class="nano-pane">
							<div class="nano-content menu-scroll-content">
								<po:menu model="#{documentoMB.menuModel}" />
							</div>
						</div>
					</div>
				</h:form>

				<h:panelGroup style="height:100%;">
					<p:commandButton value="Tag customizada" styleClass="NavyButton"
						rendered="#{documentoMB.entity.tipo != null}"
						oncomplete="PF('dlgNovaTag').show();" update="dlgNovaTag"
						process="@this">
					</p:commandButton>
				</h:panelGroup>
			</p:panel>

		</h:panelGroup>
	</p:panel>

	<p:remoteCommand name="novaTag"
		onstart="PrimeFaces.widgets.editor.instance.insertText('{Custom-#{documentoMB.novaTag}}')"
		process="@this,editor" update="editor">
	</p:remoteCommand>

	<p:dialog id="dlgNovaTag" widgetVar="dlgNovaTag" header="Nova tag">
		<p:panelGrid columns="1" layout="grid"
			styleClass="ui-panelgrid-blank ui-fluid form-group">

			<h:panelGroup>
				<p:outputLabel value="Informe o nome da tag:" />
				<p:inputText id="inputTag" value="#{documentoMB.novaTag}">
					<p:ajax process="@this" update="btnNewTag" />
				</p:inputText>
			</h:panelGroup>
		</p:panelGrid>

		<p:panelGrid columns="3" layout="grid"
			styleClass="ui-panelgrid-blank ui-fluid form-group">
			<p:commandButton value="Cancelar"
				actionListener="#{documentoMB.setNovaTag(null)}"
				styleClass="RedButton" oncomplete="PF('dlgNovaTag').hide();"
				process="@this" />
			<h:panelGroup></h:panelGroup>
			<p:commandButton id="btnNewTag" value="Salvar"
				styleClass="GreenButton"
				onstart="PrimeFaces.widgets.editor.instance.insertText('{Custom-#{documentoMB.novaTag}}')"
				process="@this,editor" update="editor"
				oncomplete="PF('dlgNovaTag').hide();" />
		</p:panelGrid>
	</p:dialog>

</ui:composition>