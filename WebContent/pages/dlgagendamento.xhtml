<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets">

	<br />

	<style>
.childRadioZeroPadd .ui-selectoneradio .ui-g .ui-g-12 {
	padding: 0px !important;
}

.childRadioZeroPadd>.ui-panelgrid-content>.ui-grid-row>.ui-panelgrid-cell
	{
	padding-top: 0px !important;
	padding-bottom: 0px !important;
}

.fieldsZeroPadd>.ui-panelgrid-content>.ui-g>.ui-panelgrid-cell {
	padding-bottom: 0px !important;
}

.buttonSmaller .ui-picklist-buttons-cell .ui-button {
	width: 33px !important;
}
</style>

	<script>
		$(document).ready(function() {
			$(".labelInline").each(function(index) {
				if (!$(this).parent().hasClass("labelInlineParent"))
					$(this).parent().addClass("labelInlineParent");
			});
		});
	</script>

	<p:fieldset legend="" toggleable="true" collapsed="false"
		style="margin-top: 20px !important">
		
		<p:panelGrid columns="6" layout="grid"
			styleClass="ui-panelgrid-blank form-group ui-fluid fieldsZeroPadd">

			<h:panelGroup styleClass="md-inputfield">
				<p:calendar id="inicio" value="#{agendamentoMB.inicio}"
					pattern="dd/MM/yyyy HH:mm" mask="true"
					defaultHour="#{agendamentoMB.getDefaultHour(agendamentoMB.inicio)}"
					defaultMinute="#{agendamentoMB.getDefaultMinute(agendamentoMB.inicio)}">
					<p:ajax event="close" listener="#{agendamentoMB.onCalendarAgChange}"
						process="@this" update=":lume:fim" />
				</p:calendar>
				<p:outputLabel for="inicio" value="Data/Hora Inicial" />
				<p:message styleClass="msg" for="inicio" />
			</h:panelGroup>
			<h:panelGroup styleClass="md-inputfield">
				<p:calendar id="fim" value="#{agendamentoMB.fim}"
					pattern="dd/MM/yyyy HH:mm" mask="true"
					defaultHour="#{agendamentoMB.getDefaultHour(agendamentoMB.fim)}"
					defaultMinute="#{agendamentoMB.getDefaultMinute(agendamentoMB.fim)}">
					<p:ajax event="close" listener="#{agendamentoMB.onCalendarAgChange}"
						process="@this" />
				</p:calendar>
				<p:outputLabel for="fim" value="Data/Hora Final" />
				<p:message styleClass="msg" for="fim" />
			</h:panelGroup>
			<h:panelGroup styleClass="md-combo">
				<p:selectOneMenu id="cadeira"
					value="#{agendamentoMB.cadeiraDentroAgenda}">
					<f:selectItem itemValue="#{null}" itemLabel="Nenhuma" />
					<f:selectItems value="#{agendamentoMB.cadeiras}" var="c"
						itemLabel="#{c}" itemValue="#{c}" />
					<p:ajax event="change" process="@this" listener="#{agendamentoMB.atualizaCadeiraSelecionada}" />
				</p:selectOneMenu>
				<p:outputLabel for="cadeira" value="Cadeira" />
				<p:message styleClass="msg" for="cadeira" />
			</h:panelGroup>

			<h:panelGroup styleClass="md-inputfield">
				<p:calendar id="chegouAs" value="#{agendamentoMB.entity.chegouAs}"
					pattern="dd/MM/yyyy HH:mm" showButtonPanel="true" mask="true"
					defaultHour="#{agendamentoMB.getDefaultHour(agendamentoMB.entity.chegouAs)}"
					defaultMinute="#{agendamentoMB.getDefaultMinute(agendamentoMB.entity.chegouAs)}" />
				<p:outputLabel for="chegouAs" value="Chegou às" />
				<p:message styleClass="msg" for="chegouAs" />
			</h:panelGroup>
			<h:panelGroup styleClass="md-inputfield">
				<p:calendar id="iniciouAs" value="#{agendamentoMB.entity.iniciouAs}"
					pattern="dd/MM/yyyy HH:mm" showButtonPanel="true" mask="true"
					defaultHour="#{agendamentoMB.getDefaultHour(agendamentoMB.entity.iniciouAs)}"
					defaultMinute="#{agendamentoMB.getDefaultMinute(agendamentoMB.entity.iniciouAs)}" />
				<p:outputLabel for="iniciouAs" value="Iniciou atend. às" />
				<p:message styleClass="msg" for="iniciouAs" />
			</h:panelGroup>
			<h:panelGroup styleClass="md-inputfield">
				<p:calendar id="finalizouAs"
					value="#{agendamentoMB.entity.finalizouAs}"
					pattern="dd/MM/yyyy HH:mm" showButtonPanel="true" mask="true"
					defaultHour="#{agendamentoMB.getDefaultHour(agendamentoMB.entity.finalizouAs)}"
					defaultMinute="#{agendamentoMB.getDefaultMinute(agendamentoMB.entity.finalizouAs)}" />
				<p:outputLabel for="finalizouAs" value="Finalizou atend. às" />
				<p:message styleClass="msg" for="finalizouAs" />
			</h:panelGroup>

		</p:panelGrid>

		<p:panelGrid columns="2" columnClasses="ui-grid-col-12" layout="grid"
			styleClass="ui-panelgrid-blank childRadioZeroPadd">

			<h:panelGroup styleClass="lumeField" id="pnStatus">
				<p:outputLabel for="confirmado" value="Status: " />
				<p:selectOneRadio id="confirmado"
					value="#{agendamentoMB.entity.statusNovo}" layout="responsive"
					columns="4">
					<p:ajax update="cancelado" process="inicio,@this" />
					<f:selectItem itemLabel="Agendado pelo Paciente" itemValue="P" />
					<f:selectItem itemLabel="Confirmado" itemValue="S" />
					<f:selectItem itemLabel="Não confirmado" itemValue="N" />
					<f:selectItem itemLabel="Encaixe" itemValue="E" />
					<f:selectItem itemLabel="Encaixe Atendido" itemValue="H" />
					<f:selectItem itemLabel="Atendido" itemValue="A" />
					<f:selectItem itemLabel="Consulta Inicial" itemValue="G" />
					<f:selectItem itemLabel="Falta" itemValue="B" />
					<f:selectItem itemLabel="Cancelado" itemValue="C" />
					<f:selectItem itemLabel="Erro de Agendamento" itemValue="D" />
					<f:selectItem itemLabel="Remarcado" itemValue="R"
						itemDisabled="#{agendamentoMB.entity.id ==0 }" />
					<f:selectItem itemLabel="Em atendimento" itemValue="O" />
					<f:selectItem itemLabel="Cliente na clínica" itemValue="I" />
				</p:selectOneRadio>
				<h:panelGroup styleClass="lumeField" id="cancelado">
					<p:outputLabel for="justificativa" value="Justificativa: "
						rendered="#{agendamentoMB.entity.statusNovo == 'C'}" />

					<p:selectOneMenu id="justificativa"
						value="#{agendamentoMB.justificativa}" converter="dominio"
						styleClass="Wid50"
						rendered="#{agendamentoMB.entity.statusNovo == 'C'}">
						<f:selectItem itemValue="#{null}"
							itemLabel="Selecione uma justificativa" />
						<f:selectItems value="#{agendamentoMB.justificativas}"
							var="justificativa" itemLabel="#{justificativa.nome}"
							itemValue="#{justificativa}" />
					</p:selectOneMenu>

					<p:message styleClass="msg" for="justificativa" />
				</h:panelGroup>
			</h:panelGroup>
			<h:panelGroup styleClass="md-combo">
				<p:panelGrid columns="1" layout="grid"
					styleClass="ui-panelgrid-blank form-group ui-fluid removeSideGridPadding">
					<h:panelGroup styleClass="md-inputfield"
						rendered="#{agendamentoMB.entity.id != 0}">
						<p:inputText
							value="#{agendamentoMB.entity.agendador.dadosBasico.nome} às #{agendamentoMB.entity.dataAgendamentoStr}"
							styleClass="FontNormal Opac100" readonly="true"
							id="agendadorAgend" />
						<p:message styleClass="msg" for="agendadorAgend" />
						<p:outputLabel for="agendadorAgend" value="Agendador"
							title="#{agendamentoMB.entity.id}" />
					</h:panelGroup>
					<h:panelGroup styleClass="md-inputfield"
						rendered="#{agendamentoMB.entity.id != 0}">
						<p:inputText
							value="#{agendamentoMB.entity.profissionalUltAlteracao.dadosBasico.nome} às #{agendamentoMB.entity.dataUltAlteracaoStr}"
							styleClass="FontNormal Opac100" readonly="true" id="ultAltAgend" />
						<p:outputLabel for="ultAltAgend" value="Última Alteração : "
							title="#{agendamentoMB.entity.id}" />
						<p:message styleClass="msg" for="ultAltAgend" />
					</h:panelGroup>
				</p:panelGrid>


			</h:panelGroup>
		</p:panelGrid>
		<p:panelGrid columns="4" layout="grid"
			styleClass="ui-panelgrid-blank form-group ui-fluid">
			<h:panelGroup styleClass="md-combo"
				title="#{agendamentoMB.entity.id}">
				<p:outputLabel for="profissionalAgend" value="Profissional" />
				<p:selectOneMenu id="profissionalAgend"
					value="#{agendamentoMB.profissionalDentroAgenda}"
					converter="profissional" filter="true" filterMatchMode="contains">
					<p:ajax listener="#{agendamentoMB.validaHoraUtilProfissionalCombo}"
						process="@this" />
					<p:ajax listener="#{agendamentoMB.calculaDataFim}" process="@this"
						update="fim" />
					<f:selectItem itemValue="#{null}"
						itemLabel="Selecione um profissional" />
					<f:selectItems value="#{agendamentoMB.profissionais}"
						var="profissional"
						itemLabel="#{profissional.dadosBasico.prefixoNome}"
						itemValue="#{profissional}" />
				</p:selectOneMenu>
				<p:message styleClass="msg" for="profissionalAgend" />
			</h:panelGroup>
			<h:panelGroup>
				<p:outputPanel style="display: inline-flex; width: 100%">
					<h:panelGroup styleClass="md-inputfield"
						style="width: calc(100% - 40px) !important; margin-right: 7px">
						<p:autoComplete dropdown="true" queryDelay="1000"
							value="#{agendamentoMB.pacienteSelecionado}" id="paciente"
							minQueryLength="3" scrollHeight="400"
							completeMethod="#{agendamentoMB.geraSugestoes}" var="p"
							itemLabel="#{p.dadosBasico.nome}" itemValue="#{p}"
							converter="paciente" forceSelection="true"
							disabled="#{agendamentoMB.entity.id != 0}"
							required="#{!agendamentoMB.visivel}"
							styleClass="paciente MarRight5">
							<p:ajax event="itemSelect"
								listener="#{agendamentoMB.handleSelect}"
								update="planoTratamento, pgProcedimentos" />
						</p:autoComplete>
						<p:outputLabel for="paciente" value="#{dominioMB.cliente}" />
						<p:message styleClass="msg" for="paciente" />
					</h:panelGroup>
					<p:outputPanel id="pnBtpaciente">
						<p:panelGrid columns="2" layout="grid"
							styleClass="ui-panelgrid-blank form-group ui-fluid"
							style="margin-top: -10px !important">

							<p:commandButton id="novoPaciente"
								rendered="#{!agendamentoMB.visivel and agendamentoMB.visivelDadosPaciente and agendamentoMB.pacienteSelecionado == null}"
								icon="fa fa-plus White"
								update="pnNovoPaciente, :lume:pnBtpaciente" immediate="true"
								actionListener="#{agendamentoMB.novoPaciente}" />
							<p:commandButton id="cancelarNovoPaciente"
								rendered="#{agendamentoMB.visivel and agendamentoMB.visivelDadosPaciente}"
								icon="fa fa-minus White"
								update="pnNovoPaciente, :lume:pnBtpaciente" immediate="true"
								actionListener="#{agendamentoMB.cancelarNovoPaciente}" />
						</p:panelGrid>
					</p:outputPanel>
				</p:outputPanel>
				<p:panel id="pnNovoPaciente" visible="#{agendamentoMB.visivel}">
					<h:panelGroup styleClass="md-inputfield" style="margin-top: 20px">
						<p:inputText id="nomePaciente"
							value="#{agendamentoMB.paciente.dadosBasico.nome}"
							maxlength="200" required="#{agendamentoMB.visivel}" />
						<p:outputLabel for="nomePaciente" value="Nome" />
						<p:message for="nomePaciente" styleClass="msg" />
					</h:panelGroup>
					<h:panelGroup styleClass="md-inputfield" id="pgResponsavel">
						<p:inputText id="celular"
							value="#{agendamentoMB.paciente.dadosBasico.celular}"
							required="#{agendamentoMB.visivel}"
							maxlength="200" />
						<p:outputLabel for="celular" value="Celular" />
						<p:message for="celular" styleClass="msg" />
					</h:panelGroup>					
					<h:panelGroup styleClass="md-inputfield">
						<p:inputText id="emailPaciente"
							value="#{agendamentoMB.paciente.dadosBasico.email}"
							maxlength="200" />
						<p:outputLabel for="emailPaciente" value="Email" />
						<p:message for="emailPaciente" styleClass="msg" />
					</h:panelGroup>		
					<p:separator styleClass="SeparatorFull" />
					<div class="Container25 Responsive100 Fnone">
						<p:commandButton id="persistPaciente" icon="White fa fa-save"
							process="pnAgendamento" value="Salvar"
							update=":lume:pnNovoPaciente, :lume:paciente, planoTratamento,procedimentos"
							actionListener="#{agendamentoMB.actionPersistPaciente}"
							styleClass="GreenButton" />
					</div>
				</p:panel>
			</h:panelGroup>
			<h:panelGroup styleClass="md-inputfield"
				rendered="#{agendamentoMB.entity.id != 0 and agendamentoMB.visivelDadosPaciente}">
				<p:inputText
					value="#{agendamentoMB.entity.paciente.dadosBasico.celular}"
					styleClass="FontNormal Opac100" readonly="true" id="celularAgend" />
				<p:outputLabel value="Celular" for="celularAgend" />
				<p:message styleClass="msg" for="celularAgend" />
			</h:panelGroup>
			<h:panelGroup styleClass="md-inputfield"
				rendered="#{agendamentoMB.entity.id != 0 and agendamentoMB.visivelDadosPaciente}">
				<p:inputText
					value="#{agendamentoMB.entity.paciente.dadosBasico.telefone}"
					styleClass="FontNormal Opac100" readonly="true" id="telefoneAgend" />
				<p:outputLabel for="telefoneAgend" value="Telefone" />
				<p:message styleClass="msg" for="telefoneAgend" />
			</h:panelGroup>
		</p:panelGrid>
	</p:fieldset>

	<br />

	<p:fieldset legend="Dados Agendamento" toggleable="true"
		collapsed="#{agendamentoMB.entity.id != 0}">


		<p:panelGrid columns="2" layout="grid"
			styleClass="ui-panelgrid-blank form-group ui-fluid">
			<h:panelGroup styleClass="md-combo">
				<p:outputLabel for="planoTratamento" value="Plano de Tratamento" />
				<p:selectOneMenu id="planoTratamento"
					value="#{agendamentoMB.planoTratamentoSelecionado}"
					converter="planoTratamento">
					<f:selectItem itemValue="#{null}" itemLabel="Selecione um Plano" />
					<f:selectItems value="#{agendamentoMB.planoTratamentos}"
						var="planoTratamento"
						itemLabel="#{planoTratamento.dataHoraDescStr}"
						itemValue="#{planoTratamento}" />
					<p:ajax update=":lume:pgProcedimentos"
						process=":lume:planoTratamento,:lume:procedimentos" />
				</p:selectOneMenu>
				<p:message for="planoTratamento" styleClass="msg" />
			</h:panelGroup>

			<h:panelGroup styleClass="lumeField labelInline">
				<p:outputLabel for="auxiliar" value="Necessita de auxiliar?" />
				<p:selectOneRadio id="auxiliar"
					value="#{agendamentoMB.entity.auxiliar}">
					<f:selectItem itemLabel="Sim" itemValue="true" />
					<f:selectItem itemLabel="Não" itemValue="false" />
				</p:selectOneRadio>
			</h:panelGroup>
		</p:panelGrid>
		<p:panelGrid columns="2" layout="grid"
			styleClass="ui-panelgrid-blank form-group ui-fluid">
			
				<h:panelGroup styleClass="lumeField labelInline">
				<p:outputLabel for="mostraFinalizados"
					value="Mostra procedimentos finalizados? " />
				<p:selectOneRadio id="mostraFinalizados"
					value="#{agendamentoMB.mostraFinalizados}">
					<p:ajax update="procedimentos" process="@this" />
					<f:selectItem itemLabel="Sim" itemValue="true" />
					<f:selectItem itemLabel="Não" itemValue="false" />
				</p:selectOneRadio>
			</h:panelGroup>
			
			<h:panelGroup styleClass="lumeField labelInline"
				rendered="#{agendamentoMB.entity.id != 0}">
				<p:outputLabel for="reserva" value="Fez reserva?"
					rendered="#{agendamentoMB.entity.id != 0}" />
				<p:selectOneRadio id="reserva" value="#{agendamentoMB.reserva}"
					readonly="true">
					<f:selectItem itemLabel="Sim" itemValue="true" itemDisabled="true" />
					<f:selectItem itemLabel="Não" itemValue="false" itemDisabled="true" />
				</p:selectOneRadio>
			</h:panelGroup>

		</p:panelGrid>		
		<p:panelGrid columns="2" layout="grid"
			styleClass="ui-panelgrid-blank form-group ui-fluid"
			>


		</p:panelGrid>
		<p:panelGrid columns="1" layout="grid"
			styleClass="ui-panelgrid-blank form-group ui-fluid removeSideGridPadding ">
			
				<h:panelGroup styleClass="lumeField" id="pgProcedimentos">
					<p:outputLabel for="procedimentos"
						value="Selecione um Procedimento : " />
					<p:pickList id="procedimentos" style="height:100px;" 
						value="#{agendamentoMB.procedimentosPickList}"
						var="procedimentosPickList" styleClass="buttonSmaller"
						itemLabel="#{procedimentosPickList.planoTratamentoProcedimento.descricaoCompleta}"
						itemValue="#{procedimentosPickList}" effect="fade" iconOnly="true"
						responsive="true" required="false"
						converter="agendamentoPlanoDash">
						<f:facet name="sourceCaption">Disponíveis</f:facet>
						<f:facet name="targetCaption">Selecionados</f:facet>
					</p:pickList>
				</h:panelGroup>
		
		</p:panelGrid>
		<p:panelGrid columns="1" layout="grid"
			styleClass="ui-panelgrid-blank form-group ui-fluid">
			<h:panelGroup styleClass="lumeField labelInline" id="pnDescricao">
				<p:outputLabel for="descricao" value="Observações : " />
				<p:inputTextarea id="descricao"
					value="#{agendamentoMB.entity.descricao}" maxlength="200" cols="20" />
				<p:message for="descricao" styleClass="msg" />
			</h:panelGroup>
		</p:panelGrid>

	</p:fieldset>


</ui:composition>