<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" template="/WEB-INF/template.xhtml"
	xmlns:pe="http://primefaces.org/ui/extensions">
	<ui:define name="content">
		<div class="ui-g ui-fluid">
			<div class="ui-g-12 ui-lg-12">
				<div class="card card-w-title">
					<style>
.cke_1 {
	border: 0px none !important;
	padding: 0px !important;
}
</style>
					<p:outputPanel id="pnPrincipal" styleClass="BordNone">

						<h1>Configuração de Documentos</h1>
						<div class="SeparatorFull"></div>

						<p:panel>
							<p:panelGrid columns="3" layout="grid"
								styleClass="ui-panelgrid-blank ui-fluid form-group">

								<h:panelGroup>
									<p:outputLabel style="margin:0px;" for="filtroTipoDocumento"
										value="Tipo de documento" />
									<p:selectOneMenu id="filtroTipoDocumento"
										style="min-width:0px;margin-top:10px;margin-bottom:10px;"
										value="#{documentoMB.filtroTipoDocumento}" converter="dominio">
										<f:selectItem itemLabel="Selecione um tipo"
											itemValue="#{null}" />
										<f:selectItems value="#{documentoMB.listaTiposDocumentos}"
											var="tipo" itemLabel="#{tipo.nome}" itemValue="#{tipo}" />

										<p:ajax process="@this" />

									</p:selectOneMenu>
								</h:panelGroup>

							</p:panelGrid>

							<p:panelGrid columns="3" layout="grid"
								styleClass="ui-panelgrid-blank ui-fluid form-group">

								<p:commandButton value="Pesquisar" styleClass="OrangeButton"
									icon="White fa fa-search"
									actionListener="#{documentoMB.pesquisar()}"
									update="dtDocumentos" process="@this" />

								<p:commandButton value="Novo documento" styleClass="NavyButton"
									icon="fa fa-file White"
									actionListener="#{documentoMB.actionNew}"
									oncomplete="PF('dlgNovoDocumento').show();"
									update="pnPrincipalDocumento" process="@this" />

							</p:panelGrid>

						</p:panel>

						<p:dataTable id="dtDocumentos" widgetVar="dtDocumentos"
							value="#{documentoMB.documentos}" var="documento"
							rowKey="#{documento}" rows="10" paginator="true"
							paginatorPosition="bottom" reflow="true"
							emptyMessage="Nenhum registro encontrado"
							binding="#{documentoMB.tabelaDocumentos}" filterDelay="1000">

							<f:facet name="header">Modelos de documentos</f:facet>

							<p:column headerText="Ações">
								<p:commandButton id="btnView" styleClass="NavyButton"
									icon="White fa fa-eye"
									actionListener="#{documentoMB.carregarDocumento(documento)}"
									oncomplete="PF('dlgNovoDocumento').show();"
									update=":lume:dlgNovoDocumento,:lume:editor"
									process="@this" />

								<p:commandButton id="btnRemove" styleClass="RedButton"
									icon="fa fa-trash" process="@this" />
							</p:column>

							<p:column filterBy="#{documento.tipo.nome}"
								sortBy="#{documento.tipo.nome}" filterMatchMode="contains"
								headerText="Tipo de documento">
								<h:outputText value="#{documento.tipo.nome}" />
							</p:column>

							<p:column filterBy="#{documento.descricao}"
								sortBy="#{documento.descricao}" filterMatchMode="contains"
								headerText="Descrição">
								<h:outputText value="#{documento.descricao}" />
							</p:column>

							<p:column filterBy="#{documento.dataCriacaoStr}"
								sortBy="#{documento.dataCriacaoStr}" filterMatchMode="contains"
								headerText="Data de criação">
								<h:outputText value="#{documento.dataCriacaoStr}" />
							</p:column>

							<p:column filterBy="#{documento.criadoPor.dadosBasico.nome}"
								sortBy="#{documento.criadoPor.dadosBasico.nome}"
								filterMatchMode="contains" headerText="Criado por">
								<h:outputText value="#{documento.criadoPor.dadosBasico.nome}" />
							</p:column>

						</p:dataTable>
					</p:outputPanel>

				</div>
			</div>
		</div>

		<p:dialog id="dlgNovoDocumento" widgetVar="dlgNovoDocumento"
			header="Novo documento" responsive="true" modal="true" appendTo=":lume"
			onHide="PF('dlgNovoDocumento').toggleMaximize();"
			onShow="PF('dlgNovoDocumento').toggleMaximize();">

			<p:panel>
				<ui:include src="dlgdocumento.xhtml" />
				
				<p:panelGrid columns="4" layout="grid"
					styleClass="ui-panelgrid-blank ui-fluid form-group">

					<p:commandButton value="Cancelar" styleClass="RedButton"
						icon="fa fa-trash" oncomplete="PF('dlgNovoDocumento').hide()" />

					<h:panelGroup></h:panelGroup>
					<h:panelGroup></h:panelGroup>

					<p:commandButton value="Salvar" styleClass="GreenButton"
						icon="fa fa-save" actionListener="#{documentoMB.actionPersist}"
						update="dtDocumentos" process="@this, editor" />
				</p:panelGrid>
			</p:panel>
		</p:dialog>
		
	</ui:define>
</ui:composition>